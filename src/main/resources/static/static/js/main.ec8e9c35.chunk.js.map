{"version":3,"sources":["containers/monthlyreport/Transactions.js","containers/monthlyreport/Categories.js","containers/monthlyreport/CategoryBarchart.js","containers/monthlyreport/MonthyReport.js","containers/reports/BalanceReport.js","containers/reports/CategoriesReport.js","containers/reports/YearReport.js","containers/reports/reports.js","containers/util.js","containers/upload/upload.js","containers/accounts/overview.js","containers/accounts/fixedbalances.js","containers/accounts/duplicates.js","containers/accounts/feeds.js","containers/accounts/accounts.js","containers/categories/categories.js","App.js","serviceWorker.js","index.js"],"names":["classes","array","filter","i","reduce","a","b","round","n","Math","Number","EPSILON","createRefs1d","existingArray","Array","fill","map","_","createRef","Transactions","styled","className","updateFilter","transactions","changeCategoryFor","setChangeCategoryFor","updateTransaction","saveTransaction","addTransaction","useState","dateRefs","setDateRefs","descriptionRefs","setDescriptionRefs","categoryRefs","setCategoryRefs","amountRefs","setAmountRefs","activeCell","setActiveCell","prev","value","ref","useRef","useEffect","current","usePrevious","tableContainerRef","focusRef1d","refArray","options","scrollTop","setSelectionRange","focus","max","length","useLayoutEffect","focusField","findIndex","t","uuid","withUuid","commit","field","id","onKeyDown","leftRefArray","rightRefArray","e","ctrlKey","key","isActive","stopPropagation","preventDefault","onKeyDownForFilter","inputCell","myRefs","other","rightRefs","leftRefs","InputCell","readOnly","disabled","type","autoFocus","onChange","target","totalPlus","amount","totalMinus","totalAmount","day","month","maxLength","description","category","React","forwardRef","props","rest","setValue","Categories","categories","categoryChanged","getTransaction","quitCategoryMode","selectCatRefs","setSelectCatRefs","filterTextRef","filterText","setFilterText","filteredCategories","c","name","toLowerCase","includes","createRefsArray","index","categoryName","SelectButton","onClick","active","substring","dataEntryKeys","test","total","count","RegExp","CategoryBarchart","data","layout","keys","indexBy","margin","top","right","bottom","left","padding","axisTop","axisRight","axisBottom","tickSize","tickPadding","tickRotation","legend","legendPosition","legendOffset","axisLeft","labelSkipWidth","labelSkipHeight","legends","dataFrom","anchor","direction","justify","translateX","translateY","itemsSpacing","itemWidth","itemHeight","itemDirection","itemOpacity","symbolSize","effects","on","style","animate","motionStiffness","motionDamping","DataEntrySection","section","ContentDiv","div","HelpContainer","aside","loadTransactions","year","fetch","then","response","json","feed","uuidv4","account","loadCurrentMonth","ok","MonthyReport","onChangeHeaderInfo","routeParams","useParams","history","useHistory","monthData","setMonthData","setCategories","setTransactions","filteredTransactions","setFilteredTransactions","parseInt","currentMonth","setCurrentMonth","showChart","setShowChart","showHelp","setShowHelp","setFilter","filterRef","getModifierState","setNextMonth","setPrevMonth","window","addEventListener","removeEventListener","listen","location","pathname","startsWith","results","match","sort","localeCompare","toString","passesFilter","m","trans","newTotal","v","result","push","renderFilter","console","log","newT","x","splice","t_uuid","find","method","headers","body","JSON","stringify","savedT","cat","forEach","startingBalance","BalanceReport","setData","d","date","y","MyResponsiveLine","xScale","format","useUTC","precision","xFormat","yScale","min","curve","lineWidth","orient","tickValues","pointSize","pointColor","theme","pointBorderWidth","pointBorderColor","from","pointLabel","pointLabelYOffset","useMesh","symbolShape","symbolBorderColor","itemBackground","CategoriesReport","setCategory","setDescription","setTotal","setMin","filteredData","setFilteredData","loadData","filterData","url","isNaN","abs","z","aa","ab","onKeyDownCapture","YearReport","ReportsContainer","ReportsContent","ReportsNav","Reports","years","setYears","activeClassName","to","path","o_date","Intl","DateTimeFormat","hour","minute","f_date","m_ca","m_it","Object","Upload","accounts","setAccounts","feeds","setFeeds","statements","setStatements","newAccountName","setNewAccountName","uploadToAccount","setUploadToAccount","currentBalance","setCurrentBalance","file","setFile","dupsForFeed","setDupsForFeed","useReducer","state","action","duplicates","assign","hash","recordNumber","duplicate","k","slice","dups","dispatchDups","matchers","categoryId","pattern","matcherId","Error","dispatchCat","loadAccounts","loadFeeds","loadStatements","loadCategories","groupByHash","contentHash","accountId","numberOfTransactions","s","f","formatToParts","formatDDMMYYYY","Date","dateImported","formatHHMM","feedId","files","formData","FormData","append","error","first","upload","j","dup","for","content","checked","Overview","accountName","overview","setOverview","fromDate","toLocaleDateString","toDate","numberOfStatements","FixedBalances","fixedBalances","setFixedBalances","dateInput","setDateInput","amountInput","setAmountInput","loadFixedBalances","balances","time","width","fb","toLocaleTimeString","Duplicates","status","duplicateCheck","StyledDt","dt","StyledDd","dd","Feeds","activeFeed","setActiveFeed","uploadFile","htmlFor","AccountsContainer","AccountsContent","AccountsNav","Accounts","StyledHeader","header","InfoBar","StyledMain","main","App","headerInfo","setHeaderInfo","getMonth","currentYear","getFullYear","exact","text","Boolean","hostname","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.ec8e9c35.chunk.js","sourcesContent":["import styled from \"styled-components\";\nimport React, {createRef, useEffect, useLayoutEffect, useRef, useState} from \"react\";\n\nfunction usePrevious(value) {\n    const ref = useRef();\n    useEffect(() => {\n        ref.current = value;\n    });\n    return ref.current;\n}\n\nconst classes = (...array) => array.filter(i => i != null).reduce((a, b) => {\n    return a && b ? (a + ' ' + b) : a ? a : b ? b : null;\n}, null)\nconst round = n => Math.round((n + Number.EPSILON) * 100) / 100\nconst createRefs1d = (existingArray, n) => Array(n).fill(null).map((_, i) => existingArray[i] || createRef())\n\nexport const Transactions = styled(({\n                                        className,\n                                        filter,\n                                        updateFilter,\n                                        transactions,\n                                        changeCategoryFor,\n                                        setChangeCategoryFor,\n                                        updateTransaction,\n                                        addTransaction,\n                                        saveTransaction\n                                    }) => {\n    const [dateRefs, setDateRefs] = useState([]);\n    const [descriptionRefs, setDescriptionRefs] = useState([]);\n    const [categoryRefs, setCategoryRefs] = useState([]);\n    const [amountRefs, setAmountRefs] = useState([]);\n    const [activeCell, setActiveCell] = useState(null);\n    const prev = usePrevious({changeCategoryFor, activeCell, filter});\n    const tableContainerRef = useRef(null);\n\n    const focusRef1d = (refArray, i, options) => {\n        if (refArray && refArray[i] && refArray[i].current) {\n            if (tableContainerRef.current) {\n                tableContainerRef.current.scrollTop = 0\n                refArray[i].current.setSelectionRange(0, 0);\n                refArray[i].current.focus()\n            }\n        }\n    };\n\n    useEffect(() => {\n        setDateRefs(createRefs1d(dateRefs, Math.max(transactions.length, dateRefs.length)));\n        setDescriptionRefs(createRefs1d(descriptionRefs, Math.max(transactions.length, descriptionRefs.length)));\n        setCategoryRefs(createRefs1d(categoryRefs, Math.max(transactions.length, categoryRefs.length)));\n        setAmountRefs(createRefs1d(amountRefs, Math.max(transactions.length, amountRefs.length)));\n    }, [transactions.length]);\n\n    useLayoutEffect(() => {\n        if (transactions.length > 0) {\n            focusField('description', 0)\n        }\n    }, [transactions.length])\n\n\n    useEffect(() => {\n        if (!changeCategoryFor && prev && prev.changeCategoryFor) {\n            saveTransaction(prev.changeCategoryFor)\n            if (transactions.findIndex(t => t.uuid === prev.changeCategoryFor) >= 0) {\n                focusRef1d(categoryRefs, withUuid(prev.changeCategoryFor))\n            } else {\n                focusRef1d(categoryRefs, 0)\n            }\n        }\n    }, [changeCategoryFor])\n\n    useEffect(() => {\n        if (activeCell && activeCell.commit && activeCell.t) {\n            saveTransaction(activeCell.t.uuid)\n            setActiveCell(null)\n        }\n    }, [activeCell])\n\n    const focusField = (field, i) => {\n        if (field === 'day' && dateRefs[i] && dateRefs[i].current) dateRefs[i].current.focus()\n        if (field === 'description' && descriptionRefs[i] && descriptionRefs[i].current) descriptionRefs[i].current.focus()\n        if (field === 'category' && categoryRefs[i] && categoryRefs[i].current) categoryRefs[i].current.focus();\n        if (field === 'amount' && amountRefs[i] && amountRefs[i].current) amountRefs[i].current.focus()\n    }\n\n\n    const withUuid = id => transactions.findIndex(t => t.uuid === id)\n\n    const onKeyDown = (t, field, refArray, i, leftRefArray, rightRefArray) => {\n        return e => {\n            if (e.ctrlKey) return;\n            if (e.key === 'Home' || e.key === 'End')\n                if (isActive(t, field)) e.stopPropagation()\n                else e.preventDefault()\n\n            if (e.key === 'ArrowUp' && !isActive(t, field)) {\n                focusRef1d(refArray, i - 1, {behavior: 'auto', block: 'center', inline: 'center'})\n                e.preventDefault()\n            }\n            if (e.key === 'PageUp' && !isActive(t, field)) {\n                focusRef1d(refArray, i - 10 > 0 ? i - 10 : 0)\n                e.preventDefault()\n            }\n            if (e.key === 'ArrowDown' && !isActive(t, field)) {\n                focusRef1d(refArray, i + 1, {alignToTop: false})\n                e.preventDefault()\n            }\n            if (e.key === 'PageDown' && !isActive(t, field)) {\n                focusRef1d(refArray, i + 10 < refArray.length ? i + 10 : refArray.length - 1)\n                e.preventDefault()\n            }\n            if (e.key === 'ArrowLeft' && !isActive(t, field))\n                focusRef1d(leftRefArray, i)\n            if (e.key === 'ArrowRight' && !isActive(t, field))\n                focusRef1d(rightRefArray, i)\n            if (e.key === 'Enter') {\n                if (field === 'category' && !changeCategoryFor) {\n                    setChangeCategoryFor(t.uuid)\n                }\n            }\n            if (e.key === 'Escape') {\n                if (filter) updateFilter(null)\n                else if (isActive(t, field)) setActiveCell(null)\n            }\n            if (!isActive(t, field)) onKeyDownForFilter(field)(e)\n        }\n    }\n\n    const onKeyDownForFilter = () => e => {\n        updateFilter(e.key)\n    }\n\n    const isActive = (t, field) => {\n        return activeCell && activeCell.t.uuid === t.uuid && activeCell.field === field\n    }\n\n    const inputCell = (t, field, myRefs, i, value, {rightRefs, leftRefs}, other) => {\n        return <InputCell key={`${t.uuid}_${field}`}\n                          ref={myRefs[i]}\n                          id={`${t.uuid}_${field}`}\n                          isActive={() => isActive(t, field)}\n                          className={classes(field, isActive(t, field) ? 'active' : null)}\n                          onKeyDown={onKeyDown(t, field, myRefs, i, leftRefs, rightRefs)}\n                          readOnly={!isActive(t, field)}\n                          disabled={changeCategoryFor != null}\n                          type='text'\n                          autoFocus={i === 0 && field === 'description' ? true : false}\n                          value={value != null ? value : ''}\n                          onChange={e => updateTransaction(t, field, e.target.value)}\n                          {...other}/>\n    }\n\n    const totalPlus = transactions.map(t => t.amount || 0).filter(a => a > 0).reduce((a, b) => a + b, 0)\n    const totalMinus = transactions.map(t => t.amount || 0).filter(a => a < 0).reduce((a, b) => a + b, 0)\n    const totalAmount = transactions.map(t => t.amount || 0).reduce((a, b) => a + b, 0)\n\n    return <div className={className}>\n        <div className='tableContainer' ref={tableContainerRef}>\n            {transactions.length > 0 &&\n                <table>\n                    <thead>\n                    <tr>\n                        <th key='day-header'>Day</th>\n                        <th key='description-header'>Description</th>\n                        <th key='category-header'>Category</th>\n                        <th key='amount-header'>Amount</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {transactions\n                        .map((t, i) => (<tr key={t.uuid}>\n                            <td key='day'>\n                                {inputCell(t, 'day', dateRefs, i, t.day + '/' + (t.month + 1), {rightRefs: descriptionRefs}, {maxLength: 2})}\n                            </td>\n                            <td key='content'>\n                                {inputCell(t, 'description', descriptionRefs, i, t.description, {\n                                    leftRefs: dateRefs,\n                                    rightRefs: categoryRefs\n                                })}\n                            </td>\n                            <td key='category'>\n                                {inputCell(t, 'category', categoryRefs, i, t.category, {\n                                    leftRefs: descriptionRefs,\n                                    rightRefs: amountRefs\n                                })}\n                            </td>\n                            <td key='amount'>\n                                {inputCell(t, 'amount', amountRefs, i, t.amount, {leftRefs: categoryRefs})}\n                            </td>\n                        </tr>))}\n                    </tbody>\n                </table>}\n        </div>\n        <dl>\n            <dt>Income</dt>\n            <dd>{round(totalPlus)}</dd>\n            <dt>Expenses</dt>\n            <dd>{round(totalMinus)}</dd>\n            <dt>Difference</dt>\n            <dd>{round(totalAmount)}</dd>\n        </dl>\n    </div>\n})`\n\n  position: relative;\n  padding-top: 2rem;\n\n  div.tableContainer {\n    overflow-y: auto;\n    max-height: 75vh;\n  }\n\n  th, td {\n    text-align: left;\n    border: 1px solid #ccc;\n    font-weight: normal;\n  }\n\n  th {\n    position: sticky;\n    top: 0;\n    z-index: 1;\n    background: #ffffff;\n    padding-top: 0.3rem;\n    padding-bottom: 0.3rem;\n  }\n\n  input {\n    display: inline-block;\n    height: 1.4rem;\n    padding: 0.25rem;\n    border: none;\n  }\n\n  input:focus {\n    outline: 2px solid black;\n  }\n\n  input.active {\n    outline: 2px solid blue;\n  }\n\n  input.day {\n    width: 2.5rem;\n  }\n\n  input.description {\n    width: 40rem;\n  }\n\n  input.amount {\n    width: 4rem;\n  }\n\n  button {\n    display: inline-block;\n    border: none;\n    width: 100%;\n    height: 1.4rem;\n    padding: 0.25rem;\n    background-color: transparent;\n  }\n\n  button.category {\n    width: 10rem;\n  }\n\n  button:disabled {\n    background-color: #fafafa;\n  }\n\n  button.changeCategoryFor {\n    background-color: white;\n    outline: 2px solid blue;\n  }\n\n  dt {\n    display: inline-block;\n  }\n\n  dt::after {\n    content: ':';\n  }\n\n  dd {\n    display: inline-block;\n    margin-left: 0.3rem;\n    margin-right: 3rem;\n  }\n`;\n\n\nconst InputCell = React.forwardRef((props, ref) => {\n\n    const {isActive, ...rest} = props\n    const [value, setValue] = useState(props.value)\n\n    useEffect(() => {\n        setValue(props.value)\n    }, [props.value])\n\n\n    const onKeyDown = e => {\n        if (isActive() && e.key === 'Enter') {\n            props.onChange(e)\n        }\n        props.onKeyDown(e)\n    }\n\n    return <input ref={ref}\n                  type='text'\n                  {...rest}\n                  value={value != null ? value : ''}\n                  onChange={e => setValue(e.target.value)}\n                  onKeyDown={onKeyDown}\n    />\n\n})","import styled from \"styled-components\";\nimport React, {createRef, useEffect, useRef, useState} from \"react\";\nimport FocusTrap from \"focus-trap-react\";\n\n\nexport const Categories = styled(({className, categories, changeCategoryFor, categoryChanged, getTransaction, quitCategoryMode}) => {\n    const [selectCatRefs, setSelectCatRefs] = useState([]);\n    const filterTextRef = useRef()\n    const [filterText, setFilterText] = useState(null);\n\n    const filteredCategories = () => categories.filter(c => !filterText || c.name.toLowerCase().includes(filterText.toLowerCase()))\n    const indexOf = categoryName => filteredCategories().findIndex(c => c.name === categoryName)\n\n    /*\n     * build a ref for each category item\n     */\n    useEffect(() => {\n        setSelectCatRefs(createRefsArray(selectCatRefs, categories.length));\n    }, [categories.length]);\n\n    useEffect(() => {\n        if (changeCategoryFor) {\n            if (filteredCategories().length === 0 && filterTextRef.current) {\n                filterTextRef.current.focus()\n            }\n            else {\n                const index = indexOf(getTransaction(changeCategoryFor).category)\n                if (index >= 0) {\n                    if (changeCategoryFor && selectCatRefs[0].current) selectCatRefs[index].current.focus()\n                } else {\n                    if (changeCategoryFor && selectCatRefs[0].current) selectCatRefs[0].current.focus()\n                }\n            }\n        }\n        else {\n            setFilterText(null)\n        }\n    }, [categories, changeCategoryFor, filterText])\n\n    const SelectButton = ({i, name}) => {\n        const props = changeCategoryFor ? {\n            onKeyDown: e => {\n                if (e.key === 'ArrowUp') focusRef1d(selectCatRefs, i-1)\n                if (e.key === 'PageUp') focusRef1d(selectCatRefs, i-10 > 0 ? i-10 : 0)\n                if (e.key === 'ArrowDown') focusRef1d(selectCatRefs, i+1)\n                if (e.key === 'PageDown') focusRef1d(selectCatRefs, i+10 < selectCatRefs.length ? i + 10 : selectCatRefs.length - 1)\n                return true\n            },\n            className: 'selectMode',\n            onClick: () => categoryChanged(name)\n        } : {\n            disabled: true\n        }\n        return <button ref={selectCatRefs[i]} {...props} >{name}</button>\n    }\n\n    const tableKeyEvents = e => {\n        if (e.key === 'Escape'  && filterText) setFilterText(null)\n        if (e.key === 'Escape') quitCategoryMode()\n        if (e.key === 'Backspace' && filterText) setFilterText(filterText.length > 0 ? filterText.substring(0, filterText.length-1) : null)\n        if (dataEntryKeys.test(e.key)) {\n            setFilterText(filterText ? filterText + e.key : e.key)\n        }\n    }\n\n    return <FocusTrap active={changeCategoryFor !== null}>\n        <div className={className} onKeyDown={tableKeyEvents}>\n            { filterText && <header>\n                <input readOnly={true} ref={filterTextRef} value={`name: ${filterText}`}/>\n            </header> }\n            <div className='tableContainer'>\n                <table>\n                    <thead>\n                    <tr>\n                        <th key='name-header'>Name</th>\n                        <th key='total-header'>Total</th>\n                        <th key='count-header'>Count</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {  filteredCategories()\n                        .filter((c => changeCategoryFor || c.total !== 0))\n                        .map((c, i) => (<tr key={c.id}>\n                            <td key='name'><SelectButton i={i} name={c.name}/></td>\n                            <td key='total'><span>{round(c.total || 0)}</span></td>\n                            <td key='count'><span>{c.count || 0}</span></td>\n                        </tr>)) }\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </FocusTrap>})` \n   position: relative; \n   padding-top: 2rem;\n   margin-left: 2rem;\n   \n   div.tableContainer {\n    overflow-y: auto; \n    max-height: 75vh;\n    }    \n   \n   header {\n     position: absolute;\n     left: 0px;\n     top: -2rem;\n     display: block;\n     border: 1px solid black;\n     background: #ffffff;\n     z-index: 2;\n     \n     input {\n      display: inline-block;\n      height: 1.4rem;\n      padding: 0.25rem;\n      border: none;\n     }\n   }\n   \n   th, td {\n      position: relative;\n      text-align: left;\n      font-weight: normal;\n      border: 1px solid #ccc;\n    }\n   th {\n      position: sticky; top: 0;\n      background: #ffffff;   \n      padding-top: 0.3rem;\n      padding-bottom: 0.3rem;\n      padding-left: 1rem;\n      padding-right: 1rem;\n      z-index: 1;\n   } \n   span {\n    padding: 0.25rem;    \n    padding-left: 1rem;\n    padding-right: 1rem;\n   } \n   button {\n    display: inline-block;\n    border: none;\n//    height: 1.9rem;    \n    width: 100%;\n    padding: 0.25rem;    \n    padding-left: 1rem;\n    padding-right: 1rem;\n    background-color: transparent;\n   }   \n   button:focus {\n    background-color: light-grey;\n   }\n   button:disabled {\n    color: black;\n   }\n   selectMode:focus {\n     outline: none\n   }\n`;\n\nconst round = n => Math.round((n + Number.EPSILON) * 100) / 100\nconst dataEntryKeys = new RegExp(\"^[a-zA-Z0-9! \\b]$\");\nconst createRefsArray = (existingArray, n) => Array(n).fill(null).map((_, i) => existingArray[i] || createRef())\nconst focusRef1d = (refArray, i) => refArray && refArray[i] && refArray[i].current && refArray[i].current.focus()\n\n","import styled from \"styled-components\";\n\nimport React from \"react\";\nimport {ResponsiveBar} from \"@nivo/bar\";\n\n\nexport const CategoryBarchart = styled(({className, data}) => <div className={className}>\n    <ResponsiveBar\n        data={data}\n        layout='horizontal'\n        keys={[ 'total']}\n        indexBy=\"name\"\n        margin={{ top: 50, right: 130, bottom: 50, left: 130 }}\n        padding={0.3}\n        axisTop={null}\n        axisRight={null}\n        axisBottom={{\n            tickSize: 5,\n            tickPadding: 5,\n            tickRotation: 0,\n            legend: 'Categories',\n            legendPosition: 'middle',\n            legendOffset: 32\n        }}\n        axisLeft={{\n            tickSize: 5,\n            tickPadding: 5,\n            tickRotation: 0,\n            legend: 'Amount',\n            legendPosition: 'middle',\n            legendOffset: -40\n        }}\n        labelSkipWidth={12}\n        labelSkipHeight={12}\n        legends={[\n            {\n                dataFrom: 'keys',\n                anchor: 'bottom-right',\n                direction: 'column',\n                justify: false,\n                translateX: 120,\n                translateY: 0,\n                itemsSpacing: 2,\n                itemWidth: 100,\n                itemHeight: 20,\n                itemDirection: 'left-to-right',\n                itemOpacity: 0.85,\n                symbolSize: 20,\n                effects: [\n                    {\n                        on: 'hover',\n                        style: {\n                            itemOpacity: 1\n                        }\n                    }\n                ]\n            }\n        ]}\n        animate={true}\n        motionStiffness={90}\n        motionDamping={15}\n    />\n</div>)`\n  height: 600px;\n`\n","import React, {createRef, useEffect, useLayoutEffect, useRef, useState} from 'react';\nimport {useParams, useHistory} from \"react-router-dom\";\n\nimport styled from 'styled-components'\nimport {v4 as uuidv4} from 'uuid';\nimport {Transactions} from \"./Transactions\";\nimport {Categories} from \"./Categories\";\nimport {CategoryBarchart} from \"./CategoryBarchart\";\n\n\nconst DataEntrySection = styled.section`\n  padding-top: 1em;\n  padding-left: 3em;`;\n\nconst ContentDiv = styled.div`\n  display: flex;\n`;\n\nconst HelpContainer = styled.aside`\n  position: fixed;\n  padding: 1em;\n  background: white;\n  height: 22em;\n  width: 30em;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border: 2px solid black;\n  z-index: 2;\n\n  h2 {\n    text-align: center;\n  }\n\n  ol {\n    list-style-type: none;\n\n    li {\n      padding: 1rem 2rem 1rem 2rem;\n    }\n  }\n`;\n\nconst classes = array => array.filter(i => i != null).reduce((a, b) => a + ' ' + b)\n\nconst round = n => Math.round((n + Number.EPSILON) * 100) / 100\n\nconst loadTransactions = (year, month) => fetch(`http://localhost:8080/api/transaction/${year}/${month}`)\n    .then(response => response.json())\n    .then(json => json.transactions.map(t => {\n        return {\n            id: t.id,\n            feed: t.feed,\n            uuid: uuidv4(),\n            description: t.description,\n            account: t.account,\n            day: t.day,\n            month: t.month,\n            year: t.year,\n            category: t.category,\n            amount: t.amount\n        }\n    }))\n\nconst loadCurrentMonth = (year, month) => fetch(`http://localhost:8080/api/month/${year}/${month}`)\n    .then(response => response.ok && response.json())\n\nconst toMonthName = month => {\n    if (month === 1) return 'January'\n    if (month === 2) return 'February'\n    if (month === 3) return 'March'\n    if (month === 4) return 'April'\n    if (month === 5) return 'May'\n    if (month === 6) return 'June'\n    if (month === 7) return 'July'\n    if (month === 8) return 'August'\n    if (month === 9) return 'September'\n    if (month === 10) return 'October'\n    if (month === 11) return 'November'\n    if (month === 12) return 'December'\n}\n\nconst dataEntryKeys = new RegExp(\"^[a-zA-Z0-9! \\b,.-]$\");\n\nconst passesFilter = (t, filter) => {\n    if (!filter || filter.length == 0) return true;\n    for (var key in t) {\n        if (t[key] && t[key].toString().toLowerCase().includes(filter.toLowerCase())) {\n            return true;\n        }\n    }\n    return false;\n}\n\nexport const MonthyReport = styled(({className, onChangeHeaderInfo}) => {\n    const routeParams = useParams()\n    const history = useHistory();\n    const [changeCategoryFor, setChangeCategoryFor] = useState(null)\n    const [monthData, setMonthData] = useState()\n    const [categories, setCategories] = useState([])\n    const [transactions, setTransactions] = useState([])\n    const [filteredTransactions, setFilteredTransactions] = useState([])\n    const [currentMonth, setCurrentMonth] = useState({\n        month: parseInt(routeParams.month),\n        year: parseInt(routeParams.year)\n    })\n    const [showChart, setShowChart] = useState(false)\n    const [showHelp, setShowHelp] = useState(false)\n    const [filter, setFilter] = useState(\"\")\n    const filterRef = useRef()\n\n    const onKeyDown = e => {\n        if (e.getModifierState('Control') && e.key.toLowerCase() === 'g') {\n            setShowChart(!showChart)\n            e.preventDefault()\n            e.stopPropagation()\n        }\n        if (e.getModifierState('Control') && e.key.toLowerCase() === 'h') {\n            setShowHelp(!showHelp)\n            e.preventDefault()\n            e.stopPropagation()\n        }\n        if (e.key === 'Escape') {\n            setShowHelp(false)\n            setShowChart(false)\n        }\n        if (e.key === 'End') {\n            setNextMonth()\n            e.preventDefault()\n            e.stopPropagation()\n        }\n        if (e.key === 'Home') {\n            setPrevMonth()\n            e.preventDefault()\n            e.stopPropagation()\n        }\n    }\n\n    useEffect(() => {\n        window.addEventListener(\"keydown\", onKeyDown)\n        return function cleanup() {\n            window.removeEventListener(\"keydown\", onKeyDown)\n        }\n    })\n\n    useEffect(() => {\n        return history.listen(location => {\n            if (location.pathname.startsWith('/transactions')) {\n                const results = location.pathname.match(/\\/transactions\\/(.+)\\/(.+)/)\n                if (results.length === 3) {\n                    setCurrentMonth({month: parseInt(results[2]), year: parseInt(results[1])})\n                }\n            }\n        })\n    }, [history])\n\n    useEffect(() => {\n        if (transactions.length === 0) {\n            filterRef.current && filterRef.current.focus()\n        }\n    }, [transactions.length])\n    useEffect(() => {\n        if (showChart) {\n            filterRef.current && filterRef.current.focus()\n        }\n    }, [showChart])\n\n\n    useEffect(() => {\n        fetch(loadCurrentMonth(currentMonth.year, currentMonth.month))\n            .then(json => setMonthData(json))\n        fetch('http://localhost:8080/api/categories')\n            .then(response => response.json())\n            .then(json => setCategories(json.categories.sort((a, b) => a.name.localeCompare(b.name))))\n            .then(_ => loadTransactions(currentMonth.year, currentMonth.month))\n            .then(t => setTransactions(t))\n    }, [])\n\n    useEffect(() => {\n        setFilteredTransactions(transactions.filter(t => passesFilter(t, filter)))\n    }, [transactions, filter])\n\n\n    useEffect(() => {\n        onChangeHeaderInfo(<>\n            <span>{toMonthName(currentMonth.month)} {currentMonth.year}</span>\n        </>)\n        loadTransactions(currentMonth.year, currentMonth.month).then(t => setTransactions(t))\n        loadCurrentMonth(currentMonth.year, currentMonth.month).then(m => setMonthData(m))\n    }, [currentMonth])\n\n\n    useEffect(() => {\n        if (filteredTransactions) {\n            setCategories(categories.map(c => {\n                const trans = filteredTransactions.filter(t => t.category === c.name)\n                const newTotal = trans.map(t => t.amount).reduce((total, v) => total + v, 0)\n                return c.total === newTotal ? c : {\n                    id: c.id,\n                    name: c.name,\n                    total: newTotal,\n                    count: trans.length\n                }\n            }).sort((a, b) => a.total - b.total))\n        }\n    }, [filteredTransactions, changeCategoryFor])\n\n\n    useEffect(() => {\n        if (filteredTransactions.length == 0) {\n            filterRef.current && filterRef.current.focus()\n        }\n    }, [filteredTransactions])\n\n    const updateFilter = (key) => {\n        //console.log(\"update filter\", filter, key)\n        onKeyDownForFilter({key: key})\n    }\n\n    const addTransaction = i => {\n        const t = [...transactions]\n        t.splice(i, 0, {\n            id: null,\n            uuid: uuidv4(),\n            account: 'Bank Austria',\n            day: null,\n            month: currentMonth.month,\n            year: currentMonth.year,\n            category: null,\n            amount: null\n        })\n        setTransactions(t)\n    }\n\n    const onKeyDownForFilter = e => {\n        if (e.key === 'Escape') {\n            setFilter(null)\n            return\n        }\n        if (e.key === 'Backspace') {\n            if (filter && filter.length > 1) {\n                setFilter(filter.substring(0, filter.length - 1))\n            } else {\n                setFilter(null)\n            }\n            return\n        }\n        if (dataEntryKeys.test(e.key)) {\n            if (filter) {\n                setFilter(filter + e.key)\n            } else {\n                setFilter(e.key)\n            }\n        }\n    }\n\n    const setNextMonth = () => {\n        let result\n        if (currentMonth.month === 12) result = {year: currentMonth.year + 1, month: 1}\n        else result = {year: currentMonth.year, month: currentMonth.month + 1}\n        setCurrentMonth(result)\n        history.push(`/transactions/${result.year}/${result.month}`)\n    }\n    const setPrevMonth = () => {\n        let result\n        if (currentMonth.month === 1) result = {year: currentMonth.year - 1, month: 12}\n        else result = {year: currentMonth.year, month: currentMonth.month - 1}\n        setCurrentMonth(result)\n        history.push(`/transactions/${result.year}/${result.month}`)\n    }\n\n    const categoryChanged = cat => {\n        transactions.filter(t => t.uuid === changeCategoryFor).forEach(t => t.category = cat)\n        setChangeCategoryFor(null)\n    }\n    const quitCategoryMode = _ => {\n        setChangeCategoryFor(null)\n    }\n    const getTransaction = uuid => transactions.find(t => t.uuid === uuid)\n    const updateTransaction = (t, field, value) => {\n        console.log(\"UT \", t, field, value)\n        const newT = {...t}\n        newT[field] = value\n        setTransactions(transactions.map(x => x.uuid === newT.uuid ? newT : x))\n    }\n\n    const saveTransaction = (t_uuid) => {\n        const t = transactions.find(t => t.uuid === t_uuid)\n        console.log(t)\n        if (t) {\n            fetch(`http://localhost:8080/api/transaction`, {\n                method: 'POST',\n                headers: {'Content-Type': 'application/json'},\n                body: JSON.stringify(t)\n            })\n                .then(response => response.json())\n                .then(savedT => {\n                    const result = {...t, ...savedT}\n                    setTransactions(transactions.map(x => x.uuid === result.uuid ? result : x))\n                })\n        }\n    }\n\n    const renderFilter = () => {\n        return <header className='filter'>\n            <label>Filtered <input ref={filterRef}\n                                  readOnly={true}\n                                  value={filter || ''}\n                                  onKeyDown={onKeyDownForFilter}/>\n            </label>\n        </header>\n    }\n\n    return (\n        <DataEntrySection className={className}>\n            {showHelp &&\n                <HelpContainer className={className}>\n                    <h2>HELP</h2>\n                    <ol>\n                        <li><b>Navigation:</b> , , , , PageUp,PageDown</li>\n                        <li><b>Filter Table data:</b> type when a table cell is highlighted</li>\n                        <li><b>Prev/Next month:</b> Home/End</li>\n                        <li><b>Sort Column:</b> CTRL + S</li>\n                        <li><b>Toggle Graph:</b> CTRL + G</li>\n                    </ol>\n                </HelpContainer>}\n            {showChart ? (<>\n                {renderFilter()}\n                <CategoryBarchart data={categories\n                    .filter(c => c.total !== 0)}/>\n            </>) : (\n                <>\n                    {(filter != null && filter.length > 0) && renderFilter()}\n                    <ContentDiv>\n                        <Transactions {...{\n                            filter,\n                            updateFilter,\n                            transactions: filteredTransactions,\n                            changeCategoryFor, setChangeCategoryFor,\n                            updateTransaction,\n                            addTransaction,\n                            saveTransaction\n                        }}/>\n                        <Categories {...{\n                            categories,\n                            changeCategoryFor,\n                            categoryChanged,\n                            getTransaction,\n                            quitCategoryMode\n                        }}/>\n                    </ContentDiv>\n                    </>)}\n            <footer>\n                <dl>\n                    <dt>Month Start</dt>\n                    <dd>{monthData && round(monthData.startingBalance || 0)}</dd>\n                    <dt>Month End</dt>\n                    <dd>{monthData && round(transactions.map(t => t.amount).reduce((a, b) => a + b, monthData.startingBalance || 0))}</dd>\n                </dl>\n            </footer>\n        </DataEntrySection>)\n})`\n  header.filter {\n    position: absolute;\n    display: inline-block;\n\n    input {\n      font-size: 1em;\n      border: 1px solid black;\n      padding-top: 5px;\n      padding-left: 5px;\n      padding-bottom: 5px;\n    }\n\n    background: #ffffff;\n    z-index: 2;\n  }\n\n  th {\n    padding-top: 0.3rem;\n    width: 3rem;\n    font-weight: normal;\n    padding-right: 0;\n  }\n\n  \n  dt {\n    display: inline-block;\n  }\n\n  dt::after {\n    content: ':';\n  }\n\n  dd {\n    display: inline-block;\n    margin-left: 0.3rem;\n    margin-right: 3rem;\n  }\n\n`\n","import React, {useEffect, useState} from \"react\";\n\nimport styled from \"styled-components\";\nimport {ResponsiveLine} from \"@nivo/line\";\n\nexport const BalanceReport = props => {\n\n    const [data, setData] = useState(null)\n\n    useEffect(() =>{\n        fetch(`http://localhost:8080/api/timeseries/balance`)\n            .then(response => response.json())\n            .then(json => json.data.map(d =>{ return {\n                id: d.id,\n                data: d.data.map(v => {\n                    return {\n                        x: v.date,\n                        y: v.amount,\n                    }})\n            }}))\n            .then(data => {\n                setData(data)\n            })\n    }, [])\n\n    console.log(data)\n\n\n    return (<div>\n        { data  && <MyResponsiveLine data={data}/> }\n    </div>)\n}\n\nconst MyResponsiveLine = styled(({className, data}) => <div className={className}>\n    <ResponsiveLine\n        data={data}\n        margin={{ top: 50, right: 110, bottom: 100, left: 60 }}\n        xScale={{\n            type: 'time',\n            format: '%Y-%m-%d',\n            useUTC: false,\n            precision: 'day'\n        }}\n        xFormat=\"time:%Y-%m-%d\"\n        yScale={{ type: 'linear', min: 'auto', max: 'auto' }}\n        curve=\"cardinal\"\n        lineWidth={4}\n        axisTop={null}\n        axisRight={null}\n        axisBottom={{\n            orient: 'bottom',\n            format: '%d %b %y',\n            tickValues: 'every month',\n            tickSize: 5,\n            tickPadding: 5,\n            tickRotation: 90,\n            legend: 'time',\n            legendOffset: 36,\n            legendPosition: 'center'\n        }}\n        axisLeft={{\n            orient: 'left',\n            tickSize: 5,\n            tickPadding: 5,\n            tickRotation: 0,\n            legend: 'count',\n            legendOffset: -40,\n            legendPosition: 'center'\n        }}\n        pointSize={10}\n        pointColor={{ theme: 'background' }}\n        pointBorderWidth={2}\n        pointBorderColor={{ from: 'serieColor' }}\n        pointLabel=\"y\"\n        pointLabelYOffset={-12}\n        useMesh={true}\n        legends={[\n            {\n                anchor: 'bottom-right',\n                direction: 'column',\n                justify: false,\n                translateX: 100,\n                translateY: 0,\n                itemsSpacing: 0,\n                itemDirection: 'left-to-right',\n                itemWidth: 80,\n                itemHeight: 20,\n                itemOpacity: 0.75,\n                symbolSize: 12,\n                symbolShape: 'circle',\n                symbolBorderColor: 'rgba(0, 0, 0, .5)',\n                effects: [\n                    {\n                        on: 'hover',\n                        style: {\n                            itemBackground: 'rgba(0, 0, 0, .03)',\n                            itemOpacity: 1\n                        }\n                    }\n                ]\n            }\n        ]}\n    />\n</div>)`\n  height: 85vh;\n  width: 95%;\n`\n","import React, {useEffect, useState} from \"react\";\n\nimport styled from \"styled-components\";\nimport {ResponsiveLine} from \"@nivo/line\";\n\nexport const CategoriesReport = props => {\n\n    const [category, setCategory] = useState(null)\n    const [description, setDescription] = useState(null)\n    const [total, setTotal] = useState(0)\n    const [min, setMin] = useState(1)\n    const [data, setData] = useState(null)\n    const [filteredData, setFilteredData] = useState(null)\n\n    useEffect(() =>{\n        loadData()\n    }, [])\n\n    useEffect(() =>{\n        loadData()\n    }, [description])\n\n\n    useEffect(() => {\n        setFilteredData(data ? filterData(data) : null)\n    }, [data, category, total, min])\n\n\n    const loadData = _ => {\n        var url = 'http://localhost:8080/api/timeseries/categories'\n        if (description) {\n            url += `?description=${description}`\n        }\n\n        return fetch(url)\n            .then(response => response.json())\n            .then(json => json.data.map(d =>{ return {\n                id: d.id,\n                data: d.data.map(v => {\n                    return {\n                        x: v.date,\n                        y: v.amount,\n                    }})\n            }}))\n            .then(data => {\n                setData(data)\n            })\n    }\n\n    const filterData = data => data\n        .filter(d => !category || d.id.toLowerCase().includes(category))\n        .filter(d => isNaN(total) || Math.abs(d.data.map(z => z.y).reduce((a,b) => a+b, 0)) >= total)\n        .filter(d => isNaN(min) || d.data.map(z => z.y).reduce((a,b) => {\n            const [aa, ab] = [Math.abs(a), Math.abs(b)]\n            return aa > ab  ? aa : ab }, 0) >= min)\n\n\n    const onKeyDownCapture = e => {\n        if (e.key === 'Escape') {\n            setDescription(null)\n            setCategory(null)\n            setTotal(0)\n            setMin(1)\n        }\n    }\n\n    return (<div onKeyDownCapture={onKeyDownCapture}>\n        Description: <input name='description' value={description || ''} onChange={e => setDescription(e.target.value)}/>\n        Category: <input name='category' value={category || ''} onChange={e => setCategory(e.target.value)}/>\n        Total Over Period: <input name='total' value={total || ''} onChange={e => setTotal(parseInt(e.target.value)) }/>\n        Can Exceed: <input name='min' value={min || ''} onChange={e =>  setMin(parseInt(e.target.value)) }/>\n        {filteredData ? filteredData.length : 0 } Categories\n        { filteredData  && <MyResponsiveLine data={filteredData}/> }\n    </div>)\n}\n\nconst MyResponsiveLine = styled(({className, data}) => <div className={className}>\n    <ResponsiveLine\n        data={data}\n        margin={{ top: 50, right: 110, bottom: 100, left: 60 }}\n        xScale={{\n            type: 'time',\n            format: '%Y-%m-%d',\n            useUTC: false,\n            precision: 'month'\n        }}\n        xFormat=\"time:%Y-%m-%d\"\n        yScale={{ type: 'linear', min: 'auto', max: 'auto' }}\n        curve=\"cardinal\"\n        lineWidth={4}\n        axisTop={null}\n        axisRight={null}\n        axisBottom={{\n            orient: 'bottom',\n            format: '%d %b %y',\n            tickValues: 'every month',\n            tickSize: 5,\n            tickPadding: 5,\n            tickRotation: 90,\n            legend: 'time',\n            legendOffset: 36,\n            legendPosition: 'center'\n        }}\n        axisLeft={{\n            orient: 'left',\n            tickSize: 5,\n            tickPadding: 5,\n            tickRotation: 0,\n            legend: 'count',\n            legendOffset: -40,\n            legendPosition: 'center'\n        }}\n        pointSize={10}\n        pointColor={{ theme: 'background' }}\n        pointBorderWidth={2}\n        pointBorderColor={{ from: 'serieColor' }}\n        pointLabel=\"y\"\n        pointLabelYOffset={-12}\n        useMesh={true}\n        legends={[\n            {\n                anchor: 'bottom-right',\n                direction: 'column',\n                justify: false,\n                translateX: 100,\n                translateY: 0,\n                itemsSpacing: 0,\n                itemDirection: 'left-to-right',\n                itemWidth: 80,\n                itemHeight: 20,\n                itemOpacity: 0.75,\n                symbolSize: 12,\n                symbolShape: 'circle',\n                symbolBorderColor: 'rgba(0, 0, 0, .5)',\n                effects: [\n                    {\n                        on: 'hover',\n                        style: {\n                            itemBackground: 'rgba(0, 0, 0, .03)',\n                            itemOpacity: 1\n                        }\n                    }\n                ]\n            }\n        ]}\n    />\n</div>)`\n  height:90vh;\n  width: 95%;\n`\n","import React, {useEffect, useState} from \"react\";\n\nimport {useParams} from \"react-router-dom\";\nimport {CategoryBarchart} from \"../monthlyreport/CategoryBarchart\";\n\nexport const YearReport = props =>  {\n\n    const { year } = useParams()\n    const [categories, setCategories] = useState(null)\n\n    useEffect(() => {\n        fetch(`http://localhost:8080/api/year/${year}/categories`)\n            .then(response => response.json())\n            .then(json => setCategories(json.data))\n    }, [year])\n\n\n    return (<div>\n        <h2>Year report for {year}</h2>\n        { categories &&  <CategoryBarchart data={categories}/> }\n    </div>)\n}","import React, {useEffect, useState} from \"react\";\n\nimport {BalanceReport} from \"./BalanceReport\";\nimport {CategoriesReport} from \"./CategoriesReport\";\nimport styled from \"styled-components\";\nimport {NavLink, Route, Switch} from \"react-router-dom\";\nimport {YearReport} from \"./YearReport\";\n\nconst ReportsContainer = styled.div`\n    display: flex;\n`\n\nconst ReportsContent = styled.div`\n padding-left: 2rem;\n flex-grow: 2;\n`\n\nconst ReportsNav = styled.div`\n flex-grow: 0;\n padding-left: 2rem;\n ol {\n    list-style-type: none;\n    padding-left: 0;\n }\n ol > li  ol > li  {\n    padding-left: 2rem;\n }\n a {\n      text-align: center;\n      display: block;\n      color: black;\n      height: 3rem;\n      line-height: 3rem;\n      text-decoration: none;\n  }\n \n .navActive {\n    background-color: #DCDCDD;\n }\n`\n\n\nexport const Reports = props => {\n\n    const [years, setYears] = useState(null)\n\n    useEffect(() =>{\n        loadData()\n    }, [])\n\n    const loadData = () => {\n        var url = 'http://localhost:8080/api/years'\n        return fetch(url)\n            .then(response => response.json())\n            .then(json => setYears(json.years))\n    }\n\n    return (\n    <ReportsContainer>\n        <ReportsNav>\n            <ol>\n                <li><NavLink activeClassName='navActive' to='/reports/timeline'>Overview</NavLink></li>\n               { years && years.map(y => <li key={y}><NavLink activeClassName='navActive' to={`/reports/year/${y}`}>{y}</NavLink></li>) }\n            </ol>\n        </ReportsNav>\n        <ReportsContent>\n            <Switch>\n                <Route key='1' path='/reports/year/:year'>\n                    <YearReport/>\n                </Route>\n                <Route key='1' path='/reports'>\n                    <BalanceReport/>\n                    <CategoriesReport/>\n                </Route>\n            </Switch>\n        </ReportsContent>\n   </ReportsContainer>)\n}\n","\nconst o_date = new Intl.DateTimeFormat('de-de', {\n    day: 'numeric',\n    month: 'numeric',\n    year: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric'\n});\nconst f_date = (m_ca, m_it) => Object({...m_ca, [m_it.type]: m_it.value});\nexport const formatDDMMYYYY = date => {\n    const d = o_date.formatToParts(date).reduce(f_date, {});\n    return d.day + '.' + d.month + '.' + d.year\n}\n\nexport const formatHHMM = date => {\n    const d = o_date.formatToParts(date).reduce(f_date, {});\n    return d.hour + ':' + d.minute\n}","import React, {useEffect, useReducer, useState} from 'react';\nimport styled from \"styled-components\";\nimport {v4 as uuidv4} from \"uuid\";\nimport {formatDDMMYYYY, formatHHMM} from \"../util\";\n\n\nexport const Upload = styled(({className}) => {\n\n    const [accounts, setAccounts] = useState([])\n    const [feeds, setFeeds] = useState([])\n    const [statements, setStatements] = useState([])\n    const [newAccountName, setNewAccountName] = useState([])\n    const [uploadToAccount, setUploadToAccount] = useState(null)\n    const [currentBalance, setCurrentBalance] = useState(null)\n    const [file, setFile] = useState(null)\n    const [dupsForFeed, setDupsForFeed] = useState(null)\n    const [dups, dispatchDups] = useReducer(dupsReducer, [])\n\n    const [categories, dispatchCat] = useReducer(categoriesReducer, []);\n\n    useEffect(() => {\n        loadAccounts()\n        loadFeeds()\n        loadStatements()\n        loadCategories()\n    }, [])\n\n    function dupsReducer(state, action) {\n        console.log(action)\n        switch (action.type) {\n            case 'set-dups':\n                return action.duplicates;\n            case 'change-dup':\n                const v = Object.assign({}, state);\n                v[action.hash] = state[action.hash].map(d => {\n                    return  d.recordNumber === action.recordNumber ? {...d, duplicate: !d.duplicate} : d;\n                })\n                return v;\n            case 'make-assumptions':\n                Object.keys(state).forEach(k => {\n                    if (state[k].length === 1) state[k][0].duplicate = true\n                    else {\n                        state[k][0].duplicate = false\n                        state[k].slice(1).forEach(d => {\n                            d.duplicate = true\n                        })\n                    }\n                })\n                return { ...state }\n        }\n    }\n\n    function categoriesReducer(state, action) {\n        switch (action.type) {\n            case 'add-category':\n                return [...state, { id: uuidv4(), name: null, matchers: []}]\n            case 'remove-category':\n                return state.filter(c => c.id !== action.categoryId)\n            case 'update-category-name':\n                return state.map(c => c.id === action.categoryId ? {\n                    ...c,\n                    name: action.name } : c )\n            case 'add-matcher':\n                return state.map(c => c.id === action.categoryId ? {\n                    ...c,\n                    matchers: [...c.matchers, {id : uuidv4(), pattern: null}]} : c)\n            case 'remove-matcher':\n                return state.map(c => c.id === action.categoryId ? {\n                    ...c,\n                    matchers: c.matchers.filter(m => m.id !== action.matcherId) } : c)\n            case 'update-matcher':\n                return state.map(c => c.id === action.categoryId ? {\n                    ...c,\n                    matchers: c.matchers.map(m => m.id === action.matcherId ? {\n                        ...m,\n                        pattern: action.pattern\n                    } : m)} : c)\n            case 'load':\n                return action.categories\n            default:\n                throw new Error();\n        }\n    }\n\n    const loadAccounts = () => fetch(`http://localhost:8080/account`)\n        .then(response => response.json())\n        .then(json => setAccounts(json.accounts))\n\n    const loadFeeds = () => fetch(`http://localhost:8080/feed`)\n        .then(response => response.json())\n        .then(json => setFeeds(json.feeds))\n\n    const loadStatements = () => fetch(`http://localhost:8080/statement`)\n        .then(response => response.json())\n        .then(json => setStatements(json.statements))\n\n    const loadCategories = () => fetch(`http://localhost:8080/category`)\n        .then(response => response.json())\n        .then(json => dispatchCat({type: 'load', categories: json.categories}))\n\n    const addAccount = () => fetch(`http://localhost:8080/account/${newAccountName}`, { method: 'PUT' })\n        .then(response => response.ok && loadAccounts())\n\n    const deleteAccount = (accountId) => fetch(`http://localhost:8080/account/${accountId}`, { method: 'DELETE' })\n        .then(response => response.ok && loadAccounts())\n\n    const deleteImport = (feedId) => fetch(`http://localhost:8080/feed/${feedId}`, { method: 'DELETE' })\n        .then(response => response.ok && loadAccounts() && loadFeeds() && loadStatements())\n\n    const duplicateCheck = (feedId) => fetch(`http://localhost:8080/duplicateCheck/${feedId}`, { method: 'GET' })\n        .then(response => response.ok && response.json())\n        .then(json => {\n            setDupsForFeed(feedId)\n            dispatchDups({type: 'set-dups', duplicates: groupByHash(json.duplicates)})\n        })\n\n    const saveCategories = () => fetch(`http://localhost:8080/category`, {\n        method: 'POST',\n        headers: {'Content-Type': 'application/json'},\n        body: JSON.stringify(categories)})\n        .then(response => loadCategories())\n\n    const saveDuplicates = () => fetch(`http://localhost:8080/duplicates/${dupsForFeed}`, {\n        method: 'POST',\n        headers: {'Content-Type': 'application/json'},\n        body: JSON.stringify(dups)})\n        .then(response => response.ok && response.json())\n        .then(json => dispatchDups({type: 'set-dups', duplicates: groupByHash(json.duplicates)}))\n\n\n    const upload = (account) => {\n        const formData = new FormData()\n        formData.append('file', file)\n        if (currentBalance)\n            formData.append('currentBalance', currentBalance)\n        fetch(`http://localhost:8080/upload/${account.name}`,{\n            method: 'POST',\n            body: formData\n        }).then(response => response.json())\n        .then(response => {\n            if (!response.error) {\n                setDupsForFeed(response.feedId)\n                dispatchDups({type: 'set-dups', duplicates: groupByHash(response.duplicates)})\n                loadAccounts();\n                loadFeeds();\n                setDupsForFeed(feeds.filter(f => f.file === file.name).first)\n                loadStatements()\n            }\n        })\n    }\n    const groupByHash = duplicates => {\n        const result = {}\n        duplicates.forEach(d => result[d.contentHash] ? result[d.contentHash].push(d) : result[d.contentHash] = [d])\n        return result\n    }\n\n    const setDuplicateAssumption = dup => {\n        if (dup.length === 1) dup[0].duplicate = true\n        else {\n            dup[0].duplicate = false\n            dup.slice(1).forEach(d => { d.duplicate = true})\n        }\n        return dup\n    }\n\n    const rowStyleFor = dup => { if (dup.duplicate) return 'duplicate-row'; else return ''; }\n\n    return (<div className={className}>\n        <section>\n            <h2>Accounts</h2>\n            <ul>\n                { accounts && accounts.map(a => (<>\n                <li>{a.name} - <button onClick={_ => deleteAccount(a.id)}>Delete</button><button onClick={_ => setUploadToAccount(a.id)}>Upload</button></li>\n                <ul>\n                    <li>Number of transactions: {a.numberOfTransactions}</li>\n                    <li>Number of statements: {statements && statements.filter(s => s.accountId === a.id).length}</li>\n                    <li>Uploads:</li>\n                    { feeds.length > 0 && (<ol>\n                        {feeds.map(f => (<li>{f.file} uploaded on {formatDDMMYYYY(new Date(f.dateImported))} at {formatHHMM(new Date(f.dateImported))}\n                        <button onClick={() => duplicateCheck(f.id)}>duplicate check</button>\n                        <button onClick={() => deleteImport(f.id)}>delete</button>\n                        </li>))}\n                    </ol>) }\n                    { uploadToAccount === a.id && (<ol>\n\n                        { statements.filter(s => s.accountId === a.id).length === 0 && <li>Please specify the most current balance\n                            <input name='balance'\n                                   type='input'\n                                   value={currentBalance !== null ? currentBalance : ''}\n                                   onChange={e => setCurrentBalance(e.target.value)}/></li> }\n                        <li>Please select file  to upload\n                                <input name='upload'\n                                       type='file'\n                                       onChange={e => setFile(e.target.files[0])}/></li>\n                        <li><button onClick={() => upload(a)}>Go!</button></li>\n                    </ol>)}\n                </ul></>)) }\n\n                <li>New: <input name='newAccount' value={newAccountName} onChange={e => setNewAccountName(e.target.value)}/>\n                    <button onClick={_ => addAccount()}>Add</button></li>\n            </ul>\n        </section>\n        { dups && Object.keys(dups).length > 0 && (<section>\n            <h2>Duplicates</h2>\n            <button name=\"assumptions\" onClick={_ => dispatchDups({type: 'make-assumptions'})}>Assumptions</button>\n            <table>\n                <thead>\n                <tr>\n                    <th>line</th>\n                    <th>content</th>\n                    <th>Duplicate</th>\n                </tr>\n                </thead>\n                <tbody>\n                { Object.keys(dups).map((k, i) => <>\n                        <tr key={`${i}-dashed}`}><td>----------------</td></tr>\n                        { dups[k].map((d,j) =>  <tr key={`${i}-${j}`} className={rowStyleFor(d)}>\n                            <td>{d.recordNumber}</td>\n                            <td><label for={`duplicate-${i}-${j}`}>{d.content}</label></td>\n                            <td>{d.count}</td>\n                            <td><input id={`duplicate-${i}-${j}`}\n                                       name={`duplicate-${i}-${j}`}\n                                       type=\"checkbox\"\n                                       checked={d.duplicate}\n                                       onChange={_ => dispatchDups(\n                                           {   type: 'change-dup',\n                                               hash: d.contentHash,\n                                               recordNumber: d.recordNumber,\n                                               duplicate: !d.duplicate})}/>\n                            </td>\n                        </tr>)}\n                        </>)}\n                </tbody>\n            </table>\n            <button name='save'onClick={() => saveDuplicates()}>Save</button>\n        </section>)}\n\n        <section>\n            <h2>Categories</h2>\n            <ul>\n                { categories && categories.map(c => (<>\n                    <li><input name={`category-${c.id}`} value={c.name} onChange={e => dispatchCat({type: 'update-category-name', categoryId: c.id, name: e.target.value})}/>\n                        <button onClick={() => dispatchCat({type: 'remove-category', categoryId: c.id})}>X</button>\n                    </li>\n                    <ul>\n                        { c.matchers && c.matchers.map(m => <li><input name={m.id} value={m.pattern} onChange={e => dispatchCat({type: 'update-matcher', categoryId: c.id, matcherId: m.id, pattern: e.target.value})}/>\n                        <button onClick={() => dispatchCat({type: 'remove-matcher', categoryId: c.id, matcherId: m.id})}>X</button>\n                        </li>)}\n                        <li><button onClick={_ => dispatchCat({type: 'add-matcher', categoryId: c.id})}>Add</button></li>\n                        </ul></>))}\n                <li><button onClick={_ => dispatchCat({type: 'add-category'})}>Add</button></li>\n            </ul>\n            <button onClick={saveCategories}>Save</button>\n        </section>\n    </div>)\n})` \n\n .duplicate-row {\n   text-decoration: line-through;\n }\n `","import React, {useEffect, useState} from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nexport const Overview = props => {\n    const { accountName } = useParams()\n    const [overview, setOverview] = useState(null)\n\n    useEffect(() => {\n        fetch(`http://localhost:8080/api/account/${accountName}/overview`)\n            .then(response => response.ok && response.json())\n            .then(json => setOverview(json))\n    }, [])\n\n    console.log(overview)\n    return (<div>\n        <h2>Overview</h2>\n        { overview && (<dl>\n            <dt>From</dt>\n            <dd>{new Date(overview.fromDate).toLocaleDateString()}</dd>\n            <dt>To</dt>\n            <dd>{new Date(overview.toDate).toLocaleDateString()}</dd>\n            <dt>Transactions</dt>\n            <dd>{overview.numberOfTransactions}</dd>\n            <dt>End of Month Statements Generated</dt>\n            <dd>{overview.numberOfStatements}</dd>\n        </dl>)\n        }\n    </div>)\n}","import React, {useEffect, useState} from \"react\";\nimport { v4 as uuidv4 } from 'uuid';\n\nimport {useParams} from \"react-router-dom\";\n\nexport const FixedBalances = props => {\n    const { accountName } = useParams()\n    const [fixedBalances, setFixedBalances] = useState([])\n    const [dateInput, setDateInput] = useState(null)\n    const [amountInput, setAmountInput] = useState(null)\n\n    useEffect(() => {\n        loadFixedBalances()\n    }, [])\n\n    const loadFixedBalances = () => fetch(`http://localhost:8080/api/account/${accountName}/fixedbalance`)\n        .then(response => response.ok && response.json())\n        .then(json => setFixedBalances(json.balances))\n\n    const saveFixedBalance = () => {\n        fetch(`http://localhost:8080/api/account/${accountName}/fixedbalance`, {\n            method: 'POST',\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify({\n                id: uuidv4(),\n                time: dateInput,\n                amount: amountInput\n            })})\n            .then(response => response.ok && response.json())\n            .then(json => setFixedBalances(json.balances))\n    }\n\n    return (<div>\n        <h2>Fixed Balances</h2>\n        Date: <input name='date' type='text' value={dateInput} onChange={e => setDateInput(e.target.value)}/>\n        Amount: <input name='amount' type='text' value={amountInput} onChange={e => setAmountInput(e.target.value)}/>\n        <button name='save' onClick={_ => saveFixedBalance()}>Add</button>\n        <table width='60%'>\n            <thead>\n            <tr>\n                <th key='th0'>Date</th>\n                <th key='th1'>Amount</th>\n            </tr>\n            </thead>\n            <tbody>\n            { fixedBalances && fixedBalances.map( fb => <tr>\n                    <td>{new Date(fb.time).toLocaleDateString('en', { year: 'numeric', month: 'long', day: 'numeric' })} {new Date(fb.time).toLocaleTimeString()}</td>\n                    <td>{fb.amount}</td>\n                </tr>)}\n            </tbody>\n        </table>\n    </div>)\n}","import React, {useEffect, useReducer, useState} from \"react\";\nimport styled from \"styled-components\";\n\n\nexport const Duplicates = styled( ({className, feedId})  => {\n\n    const [dupsForFeed, setDupsForFeed] = useState(null)\n    const [dups, dispatchDups] = useReducer(dupsReducer, [])\n\n    console.log(feedId)\n\n    const duplicateCheck = (feedId) => fetch(`http://localhost:8080/api/duplicateCheck/${feedId}`, { method: 'GET' })\n        .then(response => response.status === 200 && response.json())\n        .then(json => {\n            if (json) {\n                setDupsForFeed(feedId)\n                dispatchDups({type: 'set-dups', duplicates: groupByHash(json.duplicates)})\n            }\n        })\n\n    const saveDuplicates = () => fetch(`http://localhost:8080/api/duplicates/${dupsForFeed}`, {\n        method: 'POST',\n        headers: {'Content-Type': 'application/json'},\n        body: JSON.stringify(dups)})\n        .then(response => response.ok && response.json())\n        .then(json => dispatchDups({type: 'set-dups', duplicates: groupByHash(json.duplicates)}))\n\n    const groupByHash = duplicates => {\n        const result = {}\n        duplicates.forEach(d => result[d.contentHash] ? result[d.contentHash].push(d) : result[d.contentHash] = [d])\n        return result\n    }\n\n    const rowStyleFor = dup => { if (dup.duplicate) return 'duplicate-row'; else return ''; }\n\n    useEffect(() => {\n        duplicateCheck(feedId)\n    }, [feedId])\n\n    function dupsReducer(state, action) {\n        console.log(action)\n        switch (action.type) {\n            case 'set-dups':\n                return action.duplicates;\n            case 'change-dup':\n                const v = Object.assign({}, state);\n                v[action.hash] = state[action.hash].map(d => {\n                    return  d.recordNumber === action.recordNumber ? {...d, duplicate: action.duplicate} : d;\n                })\n                return v;\n            case 'make-assumptions':\n                Object.keys(state).forEach(k => {\n                    if (state[k].length === 1) state[k][0].duplicate = true\n                    else {\n                        state[k][0].duplicate = false\n                        state[k].slice(1).forEach(d => {\n                            d.duplicate = true\n                        })\n                    }\n                })\n                return { ...state }\n        }\n    }\n\n    return dups && Object.keys(dups).length > 0 && (<section className={className}>\n            <h2>Duplicates</h2>\n            <button name=\"assumptions\" onClick={_ => dispatchDups({type: 'make-assumptions'})}>Assumptions</button>\n            <button name='save'onClick={() => saveDuplicates()}>Save</button>\n            <table>\n                <thead>\n                <tr>\n                    <th>line</th>\n                    <th>content</th>\n                    <th>Duplicate</th>\n                </tr>\n                </thead>\n                <tbody>\n                { Object.keys(dups).map((k, i) => <>\n                    <tr key={`${i}-dashed}`}><td>----------------</td></tr>\n                    { dups[k].map((d,j) =>  <tr key={`${i}-${j}`} className={rowStyleFor(d)}>\n                        <td key={`d1-${i}-${j}`}>{d.recordNumber}</td>\n                        <td key={`d2-${i}-${j}`}><label for={`duplicate-${i}-${j}`}>{d.content}</label></td>\n                        <td key={`d3-${i}-${j}`}>{d.count}</td>\n                        <td key={`d4-${i}-${j}`} className='radio'>\n                            <label>yes\n                                <input id={`duplicate-${i}-${j}`}\n                                       name={`duplicate-${i}-${j}`}\n                                       type=\"radio\"\n                                       value=\"yes\"\n                                       checked={d.duplicate === true}\n                                       onChange={_ => dispatchDups(\n                                           {   type: 'change-dup',\n                                               hash: d.contentHash,\n                                               recordNumber: d.recordNumber,\n                                               duplicate: true})}/>\n                            </label>\n                            <label>no\n                                <input id={`duplicate-${i}-${j}`}\n                                       name={`duplicate-${i}-${j}`}\n                                       type=\"radio\"\n                                       value=\"no\"\n                                       checked={d.duplicate !== true && d.duplicate !== null}\n                                       onChange={_ => dispatchDups(\n                                           {   type: 'change-dup',\n                                               hash: d.contentHash,\n                                               recordNumber: d.recordNumber,\n                                               duplicate: false})}/>\n                            </label>\n                            <label>don't know\n                                <input id={`duplicate-${i}-${j}`}\n                                       name={`duplicate-${i}-${j}`}\n                                       type=\"radio\"\n                                       value=\"unknown\"\n                                       checked={d.duplicate === null}\n                                       onChange={_ => dispatchDups(\n                                           {   type: 'change-dup',\n                                               hash: d.contentHash,\n                                               recordNumber: d.recordNumber,\n                                               duplicate: null})}/>\n                            </label>\n                        </td>\n                    </tr>)}\n                </>)}\n                </tbody>\n            </table>\n        </section>)\n})` \n\n .duplicate-row {\n   td {\n    text-decoration: line-through;\n   }\n   td.radio {\n    text-decoration: none;\n   }\n   \n }\n `","import React, {useEffect, useReducer, useState} from \"react\";\nimport {useParams} from \"react-router-dom\";\nimport {Duplicates} from \"./duplicates\";\n\nimport styled from \"styled-components\";\n\nconst StyledDt = styled.dt`\n    display: inline-block;\n`\n\nconst StyledDd = styled.dd`\n    margin-left: 4pt;\n    display: inline-block;\n`\n\nexport const Feeds = props => {\n    const { accountName } = useParams()\n    const [feeds, setFeeds] = useState([])\n    const [activeFeed, setActiveFeed] = useState(null)\n\n    useEffect(() => {\n        loadFeeds()\n    }, [])\n\n    const loadFeeds = () => fetch(`http://localhost:8080/api/account/${accountName}/feed`)\n        .then(response => response.ok && response.json())\n        .then(json => setFeeds(json.feeds))\n\n    const deleteImport = (feedId) => fetch(`http://localhost:8080/api/feed/${feedId}`, { method: 'DELETE' })\n        .then(response => response.ok && loadFeeds() && setActiveFeed(null))\n\n    const upload = (uploadFile) => {\n        console.log(uploadFile)\n        if (uploadFile) {\n            const formData = new FormData()\n            formData.append('file',uploadFile)\n            fetch(`http://localhost:8080/api/account/${accountName}/feed`, {\n                method: 'POST',\n                body: formData\n            }).then(response => response.json())\n                .then(response => {\n                    if (!response.error) {\n                        loadFeeds();\n                    }\n                })\n        }\n    }\n\n    return (<div>\n        <h2>Feeds</h2>\n        <input type='file' name='upload' onChange={ e => upload(e.target.files[0])}/>\n        <table width=\"100%\">\n            <tbody>\n            { feeds.map((f, i) => <tr key={`f0-${i}`}>\n                 <td key={`f1-${i}`}><input id={`f1-${i}`} type='radio' name='feed' onChange={_ => setActiveFeed(f)} checked={f === activeFeed}/></td>\n                 <td key={`f2-${i}`}><label htmlFor={`f1-${i}`}> {f.file}</label></td>\n                 <td key={`f3-${i}`}>{new Date(f.dateImported).toLocaleDateString('en', { year: 'numeric', month: 'long', day: 'numeric' })} {new Date(f.dateImported).toLocaleTimeString()}</td>\n             </tr>)}\n            </tbody>\n        </table>\n        { activeFeed && (<>\n            <div key='overview'>\n                <dl>\n                    <StyledDt>From:</StyledDt>\n                    <StyledDd>{new Date(activeFeed.fromDate).toLocaleDateString('en', { year: 'numeric', month: 'long', day: 'numeric' })}</StyledDd>\n                </dl>\n                    <StyledDt>To:</StyledDt>\n                    <StyledDd>{new Date(activeFeed.toDate).toLocaleDateString('en', { year: 'numeric', month: 'long', day: 'numeric' })}</StyledDd>\n                <dl>\n                    <StyledDt>Transactions:</StyledDt>\n                    <StyledDd>{activeFeed.numberOfTransactions}</StyledDd>\n                </dl>\n            </div>\n            <button name='delete' onClick={ _ => deleteImport(activeFeed.feedId)}>Delete</button>\n            <Duplicates feedId={activeFeed.feedId}/></>)}\n    </div>)\n}","import React, {useEffect, useState} from \"react\";\n\nimport styled from \"styled-components\";\nimport {NavLink, Route, Switch} from \"react-router-dom\";\nimport {Overview} from \"./overview\";\nimport {FixedBalances} from \"./fixedbalances\";\nimport {Feeds} from \"./feeds\";\n\nconst AccountsContainer = styled.div`\n    display: flex;\n`\n\nconst AccountsContent = styled.div`\n padding-left: 2rem;\n flex-grow: 2;\n`\n\nconst AccountsNav = styled.div`\n flex-grow: 0;\n padding-left: 2rem;\n ol {\n    list-style-type: none;\n    padding-left: 0;\n }\n ol > li  ol > li  {\n    padding-left: 2rem;\n }\n a {\n      text-align: center;\n      display: block;\n      color: black;\n      height: 3rem;\n      line-height: 3rem;\n      text-decoration: none;\n  }\n \n .navActive {\n    background-color: #DCDCDD;\n }\n`\n\n\nexport const Accounts = props => {\n\n    const [accounts, setAccounts] = useState([])\n\n    useEffect(() =>{\n        loadData()\n    }, [])\n\n    const loadData = () => {\n        var url = 'http://localhost:8080/api/account'\n        return fetch(url)\n            .then(response => response.json())\n            .then(json => setAccounts(json.accounts))\n    }\n\n    return (\n        <AccountsContainer>\n            <AccountsNav>\n                <ol>\n                    { accounts && accounts.map(a => <li key={a.name}>\n                        <NavLink activeClassName='navActive' to={`/accounts/${a.name}`}>{a.name}</NavLink>\n                        <ol>\n                            <li><NavLink activeClassName='navActive' to={`/accounts/${a.name}/feeds`}>Feeds</NavLink></li>\n                            <li><NavLink activeClassName='navActive' to={`/accounts/${a.name}/fixedbalances`}>FixedBalances</NavLink></li>\n                        </ol>\n                    </li>) }\n                </ol>\n            </AccountsNav>\n            <AccountsContent>\n                <Switch>\n                    <Route key='route-2' path='/accounts/:accountName/feeds'>\n                        <Feeds/>\n                    </Route>\n                    <Route key='route-3' path='/accounts/:accountName/fixedbalances'>\n                        <FixedBalances/>\n                    </Route>\n                    <Route key='route-3' path='/accounts/:accountName'>\n                        <Overview/>\n                    </Route>\n                </Switch>\n            </AccountsContent>\n        </AccountsContainer>)\n}\n","import React, {useEffect, useReducer, useState} from \"react\";\nimport {v4 as uuidv4} from \"uuid\";\n\nexport const Categories = props => {\n\n    const [categories, dispatchCat] = useReducer(categoriesReducer, []);\n\n\n    useEffect(() => {\n        loadCategories()\n    }, [])\n\n    const loadCategories = () => fetch(`http://localhost:8080/api/category`)\n        .then(response => response.json())\n        .then(json => dispatchCat({type: 'load', categories: json.categories}))\n\n    const saveCategories = () => fetch(`http://localhost:8080/api/category`, {\n        method: 'POST',\n        headers: {'Content-Type': 'application/json'},\n        body: JSON.stringify(categories)})\n        .then(response => loadCategories())\n\n    function categoriesReducer(state, action) {\n        switch (action.type) {\n            case 'add-category':\n                return [...state, { id: uuidv4(), name: null, matchers: []}]\n            case 'remove-category':\n                return state.filter(c => c.id !== action.categoryId)\n            case 'update-category-name':\n                return state.map(c => c.id === action.categoryId ? {\n                    ...c,\n                    name: action.name } : c )\n            case 'add-matcher':\n                return state.map(c => c.id === action.categoryId ? {\n                    ...c,\n                    matchers: [...c.matchers, {id : uuidv4(), pattern: null}]} : c)\n            case 'remove-matcher':\n                return state.map(c => c.id === action.categoryId ? {\n                    ...c,\n                    matchers: c.matchers.filter(m => m.id !== action.matcherId) } : c)\n            case 'update-matcher':\n                return state.map(c => c.id === action.categoryId ? {\n                    ...c,\n                    matchers: c.matchers.map(m => m.id === action.matcherId ? {\n                        ...m,\n                        pattern: action.pattern\n                    } : m)} : c)\n            case 'load':\n                return action.categories\n            default:\n                throw new Error();\n        }\n    }\n\n    return (<section>\n            <h2>Categories</h2>\n            <ul>\n                { categories && categories.map(c => (<>\n                    <li><input name={`category-${c.id}`} value={c.name} onChange={e => dispatchCat({type: 'update-category-name', categoryId: c.id, name: e.target.value})}/>\n                        <button onClick={() => dispatchCat({type: 'remove-category', categoryId: c.id})}>X</button>\n                    </li>\n                    <ul>\n                        { c.matchers && c.matchers.map(m => <li><input name={m.id} value={m.pattern} onChange={e => dispatchCat({type: 'update-matcher', categoryId: c.id, matcherId: m.id, pattern: e.target.value})}/>\n                            <button onClick={() => dispatchCat({type: 'remove-matcher', categoryId: c.id, matcherId: m.id})}>X</button>\n                        </li>)}\n                        <li><button onClick={_ => dispatchCat({type: 'add-matcher', categoryId: c.id})}>Add</button></li>\n                    </ul></>))}\n                <li><button onClick={_ => dispatchCat({type: 'add-category'})}>Add</button></li>\n            </ul>\n            <button onClick={saveCategories}>Save</button>\n        </section>\n    )\n}","import React, {useState} from 'react';\nimport {BrowserRouter as Router, NavLink, Route, Switch, Redirect} from 'react-router-dom';\nimport './App.css';\nimport {MonthyReport} from \"./containers/monthlyreport/MonthyReport\";\nimport styled from 'styled-components'\nimport {Reports} from \"./containers/reports/reports\";\nimport {Upload} from \"./containers/upload/upload\";\nimport {Accounts} from \"./containers/accounts/accounts\";\nimport {Categories} from \"./containers/categories/categories\";\n\nconst StyledHeader = styled.header`\n  display: flex;\n\n  ol {\n    display: flex;\n    margin: 0;\n    list-style-type: none;\n\n    li {\n      padding-right: 1rem;\n    }\n\n    a {\n      text-align: center;\n      display: block;\n      color: black;\n      height: 3rem;\n      line-height: 3rem;\n      text-decoration: none;\n    }\n\n    .navActive {\n      background-color: #DCDCDD;\n    }\n  }\n\n  h1 {\n    margin: 0;\n    margin-left: 5rem;\n  }\n\n  border-bottom: solid black 1px;\n`;\n\nconst InfoBar = styled.div`\n  padding-top: 0.9em;\n  margin-left: 10rem;\n\n  //    position: absolute;\n  //   right: 30vw;\n`;\n\n\nconst StyledMain = styled.main`\n`;\n\nfunction App() {\n    const [headerInfo, setHeaderInfo] = useState(\"\")\n    const currentMonth = new Date().getMonth() + 1\n    const currentYear = new Date().getFullYear()\n\n    return (\n        <div className=\"App\">\n            <Router>\n                <StyledHeader className=\"App-header\">\n                    <ol>\n                        <li><NavLink activeClassName='navActive' to=\"/accounts\">Accounts</NavLink></li>\n                        <li><NavLink activeClassName='navActive' to=\"/categories\">Categories</NavLink></li>\n                        <li><NavLink activeClassName='navActive' to=\"/transactions\">Monthly</NavLink></li>\n                        <li><NavLink activeClassName='navActive' to=\"/reports\">Reports</NavLink></li>\n                    </ol>\n                    <h1>{headerInfo}</h1>\n                    <InfoBar>Press CTRL+H for help</InfoBar>\n                </StyledHeader>\n                <StyledMain>\n                    <Switch>\n                        <Route exact={true} key=\"route-1\" path='/transactions'>\n                            <Redirect to={`/transactions/${currentYear}/${currentMonth}`}/>\n                        </Route>\n                        <Route exact={true} key=\"route-1\" path='/transactions/:year/:month'>\n                            <MonthyReport onChangeHeaderInfo={(text) => setHeaderInfo(text)}/>\n                        </Route>\n                        <Route exact={false} key=\"route-2\" path='/reports'>\n                            <Reports/>\n                        </Route>\n                        <Route exact={false} key=\"route-3\" path='/accounts'>\n                            <Accounts/>\n                        </Route>\n                        <Route exact={false} key=\"route-3\" path='/categories'>\n                            <Categories/>\n                        </Route>\n                        <Route exact={false} key=\"route-3\" path='/upload'>\n                            <Upload/>\n                        </Route>\n                        <Route>\n                            <Redirect to='enterdata'/>\n                        </Route>\n                    </Switch>\n                </StyledMain>\n            </Router>\n        </div>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}