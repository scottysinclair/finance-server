(this["webpackJsonpfinance-ui"]=this["webpackJsonpfinance-ui"]||[]).push([[0],{255:function(e,t,n){e.exports=n(409)},260:function(e,t,n){},261:function(e,t,n){},409:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(155),o=n.n(c),l=(n(260),n(3)),u=n(9),i=n(21),m=n(16),d=(n(261),n(45)),s=n(8),f=n(10),h=n(477),p=n(246);function b(){var e=Object(u.a)(["\n    \n  position: relative;\n  padding-top: 2rem;\n\n    div.tableContainer {\n        overflow-y: auto; \n        max-height: 75vh;      \n    }\n    \n   th, td {\n      text-align: left;\n      border: 1px solid #ccc;\n      font-weight: normal;\n    }\n    th {\n      position: sticky; top: 0;\n      z-index: 1;      \n      background: #ffffff;\n      padding-top: 0.3rem;\n      padding-bottom: 0.3rem;\n    }\n            \n   input {\n      display: inline-block;\n      height: 1.4rem;\n      padding: 0.25rem;\n      border: none;\n   }\n   input:focus {\n       outline: 2px solid black;\n   }\n  tr.deleting {\n     td { border: 2px solid red;}\n     input:focus { outline: none; }\n     button:focus { outline: none; }\n     input, button {\n        text-decoration: line-through;\n     }\n   }\n   \n   input.active {\n       outline: 2px solid blue;\n   }\n   input.day {\n     width: 3rem;\n   }\n   input.description {\n     width: 30rem;\n   }\n   input.amount {\n     width: 4rem;\n   }\n   button {\n    display: inline-block;\n    border: none;\n    width: 100%;\n    height: 1.4rem;\n    padding: 0.25rem;\n    background-color: transparent;\n   }\n   button.category {\n     width: 10rem;\n   }\n   button:disabled {\n    background-color: #fafafa;\n   }   \n   \n   button.changeCategoryFor {\n      background-color: white;\n      outline: 2px solid blue;\n   }\n   \n   dt {\n     display: inline-block;\n   }\n   dt::after {\n     content: ':';\n   }\n   dd {\n     display: inline-block;\n     margin-left: 0.3rem;\n     margin-right: 3rem;\n   }\n"]);return b=function(){return e},e}var g=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){return e&&t?e+" "+t:e||(t||null)}),null)},y=function(e){return Math.round(100*(e+Number.EPSILON))/100},E=new RegExp("^[-a-zA-Z0-9! \b]$"),O=function(e,t){return Array(t).fill(null).map((function(t,n){return e[n]||Object(a.createRef)()}))},v=function(e,t){return e&&e[t]&&e[t].current&&e[t].current.focus()},j=Object(f.a)((function(e){var t=e.className,n=e.filter,c=e.updateFilter,o=e.transactions,u=e.changeCategoryFor,i=e.setChangeCategoryFor,m=e.updateTransaction,d=e.deleteTransaction,s=e.addTransaction,f=e.saveTransaction,h=Object(a.useState)([]),p=Object(l.a)(h,2),b=p[0],j=p[1],C=Object(a.useState)([]),S=Object(l.a)(C,2),w=S[0],x=S[1],D=Object(a.useState)([]),N=Object(l.a)(D,2),I=N[0],T=N[1],A=Object(a.useState)([]),P=Object(l.a)(A,2),F=P[0],L=P[1],R=Object(a.useState)(null),B=Object(l.a)(R,2),M=B[0],z=B[1],H=Object(a.useState)({}),W=Object(l.a)(H,2),K=W[0],J=W[1],U=Object(a.useState)({}),Y=Object(l.a)(U,2),X=Y[0],G=Y[1],_=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e})),t.current}({changeCategoryFor:u,activeCell:M,filter:n});Object(a.useEffect)((function(){j(O(b,Math.max(o.length,b.length))),x(O(w,Math.max(o.length,w.length))),T(O(I,Math.max(o.length,I.length))),L(O(F,Math.max(o.length,F.length)))}),[o.length]),Object(a.useLayoutEffect)((function(){if(X&&"AddTransaction"===X.name&&($(X.focusAfter.f,X.focusAfter.i),G(null)),n["--source"]){var e=n["--source"].split("_"),t=Object(l.a)(e,2),a=t[0],r=t[1],c=o.findIndex((function(e){return e.uuid===a}));c>=0?$(r,c):o.length>0&&$(r,0)}}),[o.length]),Object(a.useLayoutEffect)((function(){K&&K.t&&K.commit&&(J({}),K.i<o.length-1?$(K.field,K.i+1):$(K.field,K.i-1))}),[K]),Object(a.useEffect)((function(){!u&&_&&_.changeCategoryFor&&(f(_.changeCategoryFor),o.findIndex((function(e){return e.uuid===_.changeCategoryFor}))>=0?v(I,Z(_.changeCategoryFor)):v(I,0))}),[u]),Object(a.useEffect)((function(){M&&M.commit&&M.t&&(f(M.t.uuid),z(null))}),[M]);var $=function(e,t){"day"===e&&b[t]&&b[t].current&&b[t].current.focus(),"description"===e&&w[t]&&w[t].current&&w[t].current.focus(),"category"===e&&I[t]&&I[t].current&&I[t].current.focus(),"amount"===e&&F[t]&&F[t].current&&F[t].current.focus()},Z=function(e){return o.findIndex((function(t){return t.uuid===e}))},q=function(e,t,a,r,o,l){return function(m){m.ctrlKey||("Home"!==m.key&&"End"!==m.key||(Q(e,t)?m.stopPropagation():m.preventDefault()),"ArrowUp"!==m.key||Q(e,t)||K.t||v(a,r-1),"PageUp"!==m.key||Q(e,t)||K.t||(v(a,r-10>0?r-10:0),m.preventDefault()),"ArrowDown"!==m.key||Q(e,t)||K.t||v(a,r+1),"PageDown"!==m.key||Q(e,t)||K.t||(v(a,r+10<a.length?r+10:a.length-1),m.preventDefault()),"ArrowLeft"!==m.key||Q(e,t)||K.t||v(o,r),"ArrowRight"!==m.key||Q(e,t)||K.t||v(l,r),"Insert"!==m.key||Q(e,t)||K.t||(G({name:"AddTransaction",focusAfter:{f:t,i:r}}),s(r)),"Delete"!==m.key||Q(e,t)||K.t||J({t:e,i:r,field:t}),"Enter"===m.key&&(K.t?(d(K.t.uuid),J({t:e,i:r,field:t,commit:!0})):"category"!==t?Q(e,t)?z({t:e,field:t,commit:!0}):z({t:e,field:t,commit:!1}):"category"!==t||u||i(e.uuid)),"Escape"===m.key&&(K.t?J({}):n[t]?c(null,null):Q(e,t)&&z(null)),Q(e,t)||V(t)(m))}},V=function(e){return function(t){"Backspace"===t.key&&n[e]&&n[e].length>1?c(e,n[e].substring(0,n[e].length-1),t.target.id):"Backspace"===t.key&&n[e]&&n[e].length>0&&c(e,null,t.target.id),E.test(t.key)&&(n[e]?c(e,n[e]+t.key,t.target.id):c(e,t.key,t.target.id))}},Q=function(e,t){return M&&M.t.uuid===e.uuid&&M.field===t},ee=function(e,t,n,a,c,o,l){var i=o.rightRefs,d=o.leftRefs;return r.a.createElement(k,Object.assign({key:"".concat(e.uuid,"_").concat(t),ref:n[a],id:"".concat(e.uuid,"_").concat(t),isActive:function(){return Q(e,t)},className:g(t,Q(e,t)?"active":null),onKeyDown:q(e,t,n,a,d,i),readOnly:!Q(e,t),disabled:null!=u,type:"text",autoFocus:0===a&&"description"===t,value:null!=c?c:"",onChange:function(n){return m(e,t,n.target.value)}},l))},te=o.map((function(e){return e.amount||0})).filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0),ne=o.map((function(e){return e.amount||0})).filter((function(e){return e<0})).reduce((function(e,t){return e+t}),0),ae=o.map((function(e){return e.amount||0})).reduce((function(e,t){return e+t}),0),re=function(e){return K&&K.t&&K.t.uuid===e.uuid};return r.a.createElement("div",{className:t},r.a.createElement("div",{className:"tableContainer"},o.length>0&&r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{key:"day-header"},"Day"),r.a.createElement("th",{key:"description-header"},"Description"),r.a.createElement("th",{key:"category-header"},"Category"),r.a.createElement("th",{key:"amount-header"},"Amount"))),r.a.createElement("tbody",null,o.map((function(e,t){return r.a.createElement("tr",{key:e.uuid,className:g(re(e)?"deleting":null)},r.a.createElement("td",{key:"day"},ee(e,"day",b,t,e.day,{rightRefs:w},{maxLength:2})),r.a.createElement("td",{key:"content"},ee(e,"description",w,t,e.description,{leftRefs:b,rightRefs:I})),r.a.createElement("td",{key:"category"},function(e,t){return r.a.createElement("button",{id:"".concat(e.uuid,"_category"),ref:I[t],autoFocus:0===t&&!1,className:g("category",u===e.uuid?"changeCategoryFor":null),onKeyDown:q(e,"category",I,t,w,F),disabled:null!=u,onClick:function(e){return e.preventDefault()}},e.category)}(e,t)),r.a.createElement("td",{key:"amount"},ee(e,"amount",F,t,e.amount,{leftRefs:I})))}))))),r.a.createElement("dl",null,r.a.createElement("dt",null,"Income"),r.a.createElement("dd",null,y(te)),r.a.createElement("dt",null,"Expenses"),r.a.createElement("dd",null,y(ne)),r.a.createElement("dt",null,"Difference"),r.a.createElement("dd",null,y(ae))))}))(b()),k=r.a.forwardRef((function(e,t){var n=e.isActive,c=Object(p.a)(e,["isActive"]),o=Object(a.useState)(e.value),u=Object(l.a)(o,2),i=u[0],m=u[1];Object(a.useEffect)((function(){m(e.value)}),[e.value]);return r.a.createElement("input",Object.assign({ref:t,type:"text"},c,{value:null!=i?i:"",onChange:function(e){return m(e.target.value)},onKeyDown:function(t){n()&&"Enter"===t.key&&e.onChange(t),e.onKeyDown(t)}}))})),C=n(231),S=n.n(C);function w(){var e=Object(u.a)([" \n   position: relative; \n   padding-top: 2rem;\n   margin-left: 5rem;\n   \n   div.tableContainer {\n    overflow-y: auto; \n    max-height: 75vh;\n    }    \n   \n   header {\n     position: absolute;\n     left: 0px;\n     top: -2rem;\n     display: block;\n     border: 1px solid black;\n     background: #ffffff;\n     z-index: 2;\n     \n     input {\n      display: inline-block;\n      height: 1.4rem;\n      padding: 0.25rem;\n      border: none;\n     }\n   }\n   \n   th, td {\n      position: relative;\n      text-align: left;\n      font-weight: normal;\n      border: 1px solid #ccc;\n    }\n   th {\n      position: sticky; top: 0;\n      background: #ffffff;   \n      padding-top: 0.3rem;\n      padding-bottom: 0.3rem;\n      padding-left: 1rem;\n      padding-right: 1rem;\n      z-index: 1;\n   } \n   span {\n    padding: 0.25rem;    \n    padding-left: 1rem;\n    padding-right: 1rem;\n   } \n   button {\n    display: inline-block;\n    border: none;\n    height: 1.9rem;    \n    width: 100%;\n    padding: 0.25rem;    \n    padding-left: 1rem;\n    padding-right: 1rem;\n    background-color: transparent;\n   }   \n   button:focus {\n    background-color: light-grey;\n   }\n   button:disabled {\n    color: black;\n   }\n   selectMode:focus {\n     outline: none\n   }\n"]);return w=function(){return e},e}var x=new RegExp("^[a-zA-Z0-9! \b]$"),D=function(e,t){return e&&e[t]&&e[t].current&&e[t].current.focus()},N=Object(f.a)((function(e){var t=e.className,n=e.categories,c=e.changeCategoryFor,o=e.categoryChanged,u=e.getTransaction,i=e.quitCategoryMode,m=Object(a.useState)([]),d=Object(l.a)(m,2),s=d[0],f=d[1],h=Object(a.useRef)(),p=Object(a.useState)(null),b=Object(l.a)(p,2),g=b[0],y=b[1],E=function(){return n.filter((function(e){return!g||e.name.toLowerCase().includes(g.toLowerCase())}))};Object(a.useEffect)((function(){var e,t;f((e=s,t=n.length,Array(t).fill(null).map((function(t,n){return e[n]||Object(a.createRef)()}))))}),[n.length]),Object(a.useEffect)((function(){if(c)if(0===E().length&&h.current)h.current.focus();else{var e=(t=u(c).category,E().findIndex((function(e){return e.name===t})));e>=0?c&&s[0].current&&s[e].current.focus():c&&s[0].current&&s[0].current.focus()}else y(null);var t}),[n,c,g]);var O=function(e){var t=e.i,n=e.name,a=c?{onKeyDown:function(e){return"ArrowUp"===e.key&&D(s,t-1),"PageUp"===e.key&&D(s,t-10>0?t-10:0),"ArrowDown"===e.key&&D(s,t+1),"PageDown"===e.key&&D(s,t+10<s.length?t+10:s.length-1),!0},className:"selectMode",onClick:function(){return o(n)}}:{disabled:!0};return r.a.createElement("button",Object.assign({ref:s[t]},a),n)};return r.a.createElement(S.a,{active:null!==c},r.a.createElement("div",{className:t,onKeyDown:function(e){"Escape"===e.key&&g&&y(null),"Escape"===e.key&&i(),"Backspace"===e.key&&g&&y(g.length>0?g.substring(0,g.length-1):null),x.test(e.key)&&y(g?g+e.key:e.key)}},g&&r.a.createElement("header",null,r.a.createElement("input",{readOnly:!0,ref:h,value:"name: ".concat(g)})),r.a.createElement("div",{className:"tableContainer"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{key:"name-header"},"Name"),r.a.createElement("th",{key:"total-header"},"Total"))),r.a.createElement("tbody",null,E().filter((function(e){return c||0!==e.total})).map((function(e,t){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",{key:"name"},r.a.createElement(O,{i:t,name:e.name})),r.a.createElement("td",{key:"total"},r.a.createElement("span",null,(n=e.total,Math.round(100*(n+Number.EPSILON))/100))));var n})))))))}))(w()),I=n(232);function T(){var e=Object(u.a)(["\n  height: 600px;\n"]);return T=function(){return e},e}var A=Object(f.a)((function(e){var t=e.className,n=e.data;return r.a.createElement("div",{className:t},r.a.createElement(I.a,{data:n,layout:"horizontal",keys:["total"],indexBy:"name",margin:{top:50,right:130,bottom:50,left:130},padding:.3,axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Categories",legendPosition:"middle",legendOffset:32},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Amount",legendPosition:"middle",legendOffset:-40},labelSkipWidth:12,labelSkipHeight:12,legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],animate:!0,motionStiffness:90,motionDamping:15}))}))(T());function P(){var e=Object(u.a)(["\n header.dataentry {\n     position: absolute;\n     left: 4rem;\n     top: 4rem;\n     display: block;\n     border: 1px solid black;\n     background: #ffffff;\n     z-index: 2;\n     \n     th {\n       padding-top: 0.3rem;\n       width: 3rem;\n       font-weight: normal;\n       padding-right: 2rem;\n     }\n     \n   }\n\ndt {\n     display: inline-block;\n   }\n   dt::after {\n     content: ':';\n   }\n   dd {\n     display: inline-block;\n     margin-left: 0.3rem;\n     margin-right: 3rem;\n   }   \n     \n"]);return P=function(){return e},e}function F(){var e=Object(u.a)(["  \n    position: absolute;\n    background: white;\n    border: 2px solid black;\n    z-index: 2;\n    ol {\n        list-style-type: none;\n        li {\n            padding: 1rem 2rem 1rem 2rem;\n        }\n     }\n"]);return F=function(){return e},e}function L(){var e=Object(u.a)(["\n    display: flex;\n"]);return L=function(){return e},e}function R(){var e=Object(u.a)(["  \n  padding-top: 3rem;\n  padding-left: 4rem;"]);return R=function(){return e},e}var B=f.a.section(R()),M=f.a.div(L()),z=f.a.aside(F()),H=function(e){return Math.round(100*(e+Number.EPSILON))/100},W=function(e,t){return fetch("http://localhost:8080/transaction/".concat(e,"/").concat(t)).then((function(e){return e.json()})).then((function(e){return e.transactions.map((function(e){return{id:e.id,uuid:Object(h.a)(),description:e.description,account:e.account,day:e.day,month:e.month,year:e.year,category:e.category,amount:e.amount}}))}))},K=function(e,t){return fetch("http://localhost:8080/month/".concat(e,"/").concat(t)).then((function(e){return e.ok&&e.json()}))},J=new RegExp("^[a-zA-Z0-9! \b]$"),U=Object(f.a)((function(e){var t=e.className,n=e.onChangeHeaderInfo,c=Object(m.h)(),o=Object(m.g)(),u=Object(a.useState)(null),i=Object(l.a)(u,2),f=i[0],p=i[1],b=Object(a.useState)(),g=Object(l.a)(b,2),y=g[0],E=g[1],O=Object(a.useState)([]),v=Object(l.a)(O,2),k=v[0],C=v[1],S=Object(a.useState)([]),w=Object(l.a)(S,2),x=w[0],D=w[1],I=Object(a.useState)([]),T=Object(l.a)(I,2),P=T[0],F=T[1],L=Object(a.useState)({month:parseInt(c.month),year:parseInt(c.year)}),R=Object(l.a)(L,2),U=R[0],Y=R[1],X=Object(a.useState)(!1),G=Object(l.a)(X,2),_=G[0],$=G[1],Z=Object(a.useState)(!1),q=Object(l.a)(Z,2),V=q[0],Q=q[1],ee=Object(a.useState)({}),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],re=Object(a.useRef)(),ce=Object(a.useRef)(),oe=Object(a.useRef)(),le=Object(a.useRef)();Object(a.useEffect)((function(){return o.listen((function(e){if(e.pathname.startsWith("/transactions")){var t=e.pathname.match(/\/transactions\/(.+)\/(.+)/);3===t.length&&Y({month:parseInt(t[2]),year:parseInt(t[1])})}}))}),[o]),Object(a.useEffect)((function(){0===x.length&&ce.current&&ce.current.focus()}),[x.length]),Object(a.useEffect)((function(){_&&ce.current&&ce.current.focus()}),[_]),Object(a.useEffect)((function(){fetch(K(U.year,U.month)).then((function(e){return E(e)})),fetch("http://localhost:8080/categories").then((function(e){return e.json()})).then((function(e){return C(e.categories.sort((function(e,t){return e.name.localeCompare(t.name)})))})).then((function(e){return W(U.year,U.month)})).then((function(e){return D(e)}))}),[]),Object(a.useEffect)((function(){F(x.filter((function(e){return function(e,t){var n=Object.keys(t).filter((function(e){return!e.startsWith("--")}));return 0===n.length||n.map((function(e){return{f:e,v:t[e].toLowerCase()}})).filter((function(t){return e[t.f]&&(""+e[t.f]).toLowerCase().includes(t.v)})).length===n.length}(e,ne)})))}),[x,ne]),Object(a.useEffect)((function(){var e;n(r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,1===(e=U.month)?"January":2===e?"February":3===e?"March":4===e?"April":5===e?"May":6===e?"June":7===e?"July":8===e?"August":9===e?"September":10===e?"October":11===e?"November":12===e?"December":void 0," ",U.year))),W(U.year,U.month).then((function(e){return D(e)})),K(U.year,U.month).then((function(e){return E(e)}))}),[U]),Object(a.useEffect)((function(){if(P&&C(k.map((function(e){var t=P.filter((function(t){return t.category===e.name})).map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0);return e.total===t?e:{id:e.id,name:e.name,total:t}}))),0===P.length&&ne["--source"]&&!f){var e=ue(ne["--source"].split("_")[1]);e&&e.current&&e.current.focus()}else if(0===P.length&&!ne["--source"]){var t=ue("description");t&&t.current&&t.current.focus()}}),[P,f]);var ue=function(e){return"day"===e?re:"description"===e?ce:"category"===e?oe:"amount"===e?le:void 0},ie=function(e,t,n){var a=Object(s.a)({},ne);e&&t&&(a[e]=t),e&&!t&&delete a[e],e||Object.keys(a).filter((function(e){return!e.startsWith("--")})).forEach((function(e){return delete a[e]})),n&&(a["--source"]=n),ae(a)},me=function(){return ne["--source"]&&ne["--source"].split("_")||[null,null]},de=function(e){return function(t){"Escape"===t.key&&ie(null,null),me()[1]&&me()[1]!==e||("Backspace"===t.key&&ne[e]&&ne[e].length>1?ie(e,ne[e].substring(0,ne[e].length-1)):"Backspace"===t.key&&ne[e]&&ne[e].length>0&&ie(e,null),J.test(t.key)&&(ne[e]?ie(e,ne[e]+t.key):ie(e,t.key)))}},se=function(){var e,t=function(e){return 0===P.length&&me()[1]===e};return r.a.createElement("header",{className:"dataentry"},r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Description"),r.a.createElement("td",{className:"description"},r.a.createElement("input",{ref:ce,readOnly:!0,disabled:!_&&(e="description",!(t(e)||0===x.length)),value:ne.description||"",onKeyDown:de("description"),maxLength:1}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Category"),r.a.createElement("td",{className:"category"},r.a.createElement("input",{ref:oe,readOnly:!0,disabled:!_&&!t("category"),value:ne.category||"",onKeyDown:de("category"),maxLength:1})))))};return r.a.createElement(B,{className:t,onKeyDownCapture:function(e){e.getModifierState("Control")&&"g"===e.key.toLowerCase()&&($(!_),e.preventDefault(),e.stopPropagation()),e.getModifierState("Control")&&"h"===e.key.toLowerCase()&&(Q(!V),e.preventDefault(),e.stopPropagation()),"Escape"===e.key&&V&&(Q(!1),e.preventDefault(),e.stopPropagation())},onKeyDown:function(e){"End"===e.key&&(!function(){var e;e=12===U.month?{year:U.year+1,month:1}:{year:U.year,month:U.month+1},Y(e),o.push("/transactions/".concat(e.year,"/").concat(e.month))}(),e.preventDefault()),"Home"===e.key&&(!function(){var e;e=1===U.month?{year:U.year-1,month:12}:{year:U.year,month:U.month-1},Y(e),o.push("/transactions/".concat(e.year,"/").concat(e.month))}(),e.preventDefault())}},V&&r.a.createElement(z,{className:t},r.a.createElement("h2",null,"HELP"),r.a.createElement("ol",null,r.a.createElement("li",null,"Navigation: \u2190, \u2191, \u2192, \u2193, PageUp,PageDown"),r.a.createElement("li",null,"Prev/Next month:  Home/End"),r.a.createElement("li",null,"Insert Transaction:  Insert"),r.a.createElement("li",null,"Delete Transaction:  Delete + Enter"),r.a.createElement("li",null,"Toggle Graph:  CTRL G"))),_?r.a.createElement(r.a.Fragment,null,se(),r.a.createElement(A,{data:k.filter((function(e){return 0!==e.total}))})):r.a.createElement(M,null,(0===x.length||Object.keys(ne).filter((function(e){return!e.startsWith("--")})).length>0)&&se(),r.a.createElement(j,{filter:ne,updateFilter:ie,transactions:P,changeCategoryFor:f,setChangeCategoryFor:p,updateTransaction:function(e,t,n){console.log("UT ",e,t,n);var a=Object(s.a)({},e);a[t]=n,D(x.map((function(e){return e.uuid===a.uuid?a:e})))},deleteTransaction:function(e){return D(x.filter((function(t){return t.uuid!=e})))},addTransaction:function(e){var t=Object(d.a)(x);t.splice(e,0,{id:null,uuid:Object(h.a)(),account:"Bank Austria",day:null,month:U.month,year:U.year,category:null,amount:null}),D(t)},saveTransaction:function(e){var t=x.find((function(t){return t.uuid===e}));console.log(t),t&&fetch("http://localhost:8080/transaction",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){var n=Object(s.a)(Object(s.a)({},t),e);D(x.map((function(e){return e.uuid===n.uuid?n:e})))}))}}),r.a.createElement(N,{categories:k,changeCategoryFor:f,categoryChanged:function(e){x.filter((function(e){return e.uuid===f})).forEach((function(t){return t.category=e})),p(null)},getTransaction:function(e){return x.find((function(t){return t.uuid===e}))},quitCategoryMode:function(e){p(null)}})),r.a.createElement("footer",null,r.a.createElement("dl",null,r.a.createElement("dt",null,"Month Start"),r.a.createElement("dd",null,y&&H(y.startingBalance)),r.a.createElement("dt",null,"Month End"),r.a.createElement("dd",null,y&&H(x.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),y.startingBalance))))))}))(P()),Y=n(112);function X(){var e=Object(u.a)(["\n  height: 85vh;\n  width: 95%;\n"]);return X=function(){return e},e}var G=function(e){var t=Object(a.useState)(null),n=Object(l.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)((function(){fetch("http://localhost:8080/timeseries/balance").then((function(e){return e.json()})).then((function(e){return e.data.map((function(e){return{id:e.id,data:e.data.map((function(e){return{x:e.date,y:e.amount}}))}}))})).then((function(e){o(e)}))}),[]),console.log(c),r.a.createElement("div",null,c&&r.a.createElement(_,{data:c}))},_=Object(f.a)((function(e){var t=e.className,n=e.data;return r.a.createElement("div",{className:t},r.a.createElement(Y.a,{data:n,margin:{top:50,right:110,bottom:100,left:60},xScale:{type:"time",format:"%Y-%m-%d",useUTC:!1,precision:"day"},xFormat:"time:%Y-%m-%d",yScale:{type:"linear",min:"auto",max:"auto"},curve:"cardinal",lineWidth:4,axisTop:null,axisRight:null,axisBottom:{orient:"bottom",format:"%d %b %y",tickValues:"every month",tickSize:5,tickPadding:5,tickRotation:90,legend:"time",legendOffset:36,legendPosition:"center"},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"count",legendOffset:-40,legendPosition:"center"},pointSize:10,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabel:"y",pointLabelYOffset:-12,useMesh:!0,legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]}))}))(X());function $(){var e=Object(u.a)(["\n  height:90vh;\n  width: 95%;\n"]);return $=function(){return e},e}var Z=function(e){var t=Object(a.useState)(null),n=Object(l.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(null),i=Object(l.a)(u,2),m=i[0],d=i[1],s=Object(a.useState)(0),f=Object(l.a)(s,2),h=f[0],p=f[1],b=Object(a.useState)(1),g=Object(l.a)(b,2),y=g[0],E=g[1],O=Object(a.useState)(null),v=Object(l.a)(O,2),j=v[0],k=v[1],C=Object(a.useState)(null),S=Object(l.a)(C,2),w=S[0],x=S[1];Object(a.useEffect)((function(){D()}),[]),Object(a.useEffect)((function(){D()}),[m]),Object(a.useEffect)((function(){x(j?N(j):null)}),[j,c,h,y]);var D=function(e){var t="http://localhost:8080/timeseries/categories";return m&&(t+="?description=".concat(m)),fetch(t).then((function(e){return e.json()})).then((function(e){return e.data.map((function(e){return{id:e.id,data:e.data.map((function(e){return{x:e.date,y:e.amount}}))}}))})).then((function(e){k(e)}))},N=function(e){return e.filter((function(e){return!c||e.id.toLowerCase().includes(c)})).filter((function(e){return isNaN(h)||Math.abs(e.data.map((function(e){return e.y})).reduce((function(e,t){return e+t}),0))>=h})).filter((function(e){return isNaN(y)||e.data.map((function(e){return e.y})).reduce((function(e,t){var n=[Math.abs(e),Math.abs(t)],a=n[0],r=n[1];return a>r?a:r}),0)>=y}))};return r.a.createElement("div",{onKeyDownCapture:function(e){"Escape"===e.key&&(d(null),o(null),p(0),E(1))}},"Description: ",r.a.createElement("input",{name:"description",value:m||"",onChange:function(e){return d(e.target.value)}}),"Category: ",r.a.createElement("input",{name:"category",value:c||"",onChange:function(e){return o(e.target.value)}}),"Total Over Period: ",r.a.createElement("input",{name:"total",value:h||"",onChange:function(e){return p(parseInt(e.target.value))}}),"Can Exceed: ",r.a.createElement("input",{name:"min",value:y||"",onChange:function(e){return E(parseInt(e.target.value))}}),w?w.length:0," Categories",w&&r.a.createElement(q,{data:w}))},q=Object(f.a)((function(e){var t=e.className,n=e.data;return r.a.createElement("div",{className:t},r.a.createElement(Y.a,{data:n,margin:{top:50,right:110,bottom:100,left:60},xScale:{type:"time",format:"%Y-%m-%d",useUTC:!1,precision:"month"},xFormat:"time:%Y-%m-%d",yScale:{type:"linear",min:"auto",max:"auto"},curve:"cardinal",lineWidth:4,axisTop:null,axisRight:null,axisBottom:{orient:"bottom",format:"%d %b %y",tickValues:"every month",tickSize:5,tickPadding:5,tickRotation:90,legend:"time",legendOffset:36,legendPosition:"center"},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"count",legendOffset:-40,legendPosition:"center"},pointSize:10,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabel:"y",pointLabelYOffset:-12,useMesh:!0,legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]}))}))($()),V=function(e){var t=Object(m.h)().year,n=Object(a.useState)(null),c=Object(l.a)(n,2),o=c[0],u=c[1];return Object(a.useEffect)((function(){fetch("http://localhost:8080/year/".concat(t,"/categories")).then((function(e){return e.json()})).then((function(e){return u(e.data)}))}),[t]),r.a.createElement("div",null,r.a.createElement("h2",null,"Year report for ",t),o&&r.a.createElement(A,{data:o}))};function Q(){var e=Object(u.a)(["\n flex-grow: 0;\n padding-left: 2rem;\n ol {\n    list-style-type: none;\n    padding-left: 0;\n }\n ol > li  ol > li  {\n    padding-left: 2rem;\n }\n a {\n      text-align: center;\n      display: block;\n      color: black;\n      height: 3rem;\n      line-height: 3rem;\n      text-decoration: none;\n  }\n \n .navActive {\n    background-color: #DCDCDD;\n }\n"]);return Q=function(){return e},e}function ee(){var e=Object(u.a)(["\n padding-left: 2rem;\n flex-grow: 2;\n"]);return ee=function(){return e},e}function te(){var e=Object(u.a)(["\n    display: flex;\n"]);return te=function(){return e},e}var ne=f.a.div(te()),ae=f.a.div(ee()),re=f.a.div(Q()),ce=function(e){var t=Object(a.useState)(null),n=Object(l.a)(t,2),c=n[0],o=n[1];Object(a.useEffect)((function(){u()}),[]);var u=function(){return fetch("http://localhost:8080/years").then((function(e){return e.json()})).then((function(e){return o(e.years)}))};return r.a.createElement(ne,null,r.a.createElement(re,null,r.a.createElement("ol",null,r.a.createElement("li",null,r.a.createElement(i.b,{activeClassName:"navActive",to:"/reports/timeline"},"Overview")),c&&c.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement(i.b,{activeClassName:"navActive",to:"/reports/year/".concat(e)},e))})))),r.a.createElement(ae,null,r.a.createElement(m.d,null,r.a.createElement(m.b,{key:"1",path:"/reports/year/:year"},r.a.createElement(V,null)),r.a.createElement(m.b,{key:"1",path:"/reports"},r.a.createElement(G,null),r.a.createElement(Z,null)))))},oe=n(110),le=new Intl.DateTimeFormat("de-de",{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}),ue=function(e,t){return Object(Object(s.a)(Object(s.a)({},e),{},Object(oe.a)({},t.type,t.value)))};function ie(){var e=Object(u.a)([" \n\n .duplicate-row {\n   text-decoration: line-through;\n }\n "]);return ie=function(){return e},e}var me=Object(f.a)((function(e){var t=e.className,n=Object(a.useState)([]),c=Object(l.a)(n,2),o=c[0],u=c[1],i=Object(a.useState)([]),m=Object(l.a)(i,2),f=m[0],p=m[1],b=Object(a.useState)([]),g=Object(l.a)(b,2),y=g[0],E=g[1],O=Object(a.useState)([]),v=Object(l.a)(O,2),j=v[0],k=v[1],C=Object(a.useState)(null),S=Object(l.a)(C,2),w=S[0],x=S[1],D=Object(a.useState)(null),N=Object(l.a)(D,2),I=N[0],T=N[1],A=Object(a.useState)(null),P=Object(l.a)(A,2),F=P[0],L=P[1],R=Object(a.useState)(null),B=Object(l.a)(R,2),M=B[0],z=B[1],H=Object(a.useReducer)((function(e,t){switch(console.log(t),t.type){case"set-dups":return t.duplicates;case"change-dup":var n=Object.assign({},e);return n[t.hash]=e[t.hash].map((function(e){return e.recordNumber===t.recordNumber?Object(s.a)(Object(s.a)({},e),{},{duplicate:!e.duplicate}):e})),n;case"make-assumptions":return Object.keys(e).forEach((function(t){1===e[t].length?e[t][0].duplicate=!0:(e[t][0].duplicate=!1,e[t].slice(1).forEach((function(e){e.duplicate=!0})))})),Object(s.a)({},e)}}),[]),W=Object(l.a)(H,2),K=W[0],J=W[1],U=Object(a.useReducer)((function(e,t){switch(t.type){case"add-category":return[].concat(Object(d.a)(e),[{id:Object(h.a)(),name:null,matchers:[]}]);case"remove-category":return e.filter((function(e){return e.id!==t.categoryId}));case"update-category-name":return e.map((function(e){return e.id===t.categoryId?Object(s.a)(Object(s.a)({},e),{},{name:t.name}):e}));case"add-matcher":return e.map((function(e){return e.id===t.categoryId?Object(s.a)(Object(s.a)({},e),{},{matchers:[].concat(Object(d.a)(e.matchers),[{id:Object(h.a)(),pattern:null}])}):e}));case"remove-matcher":return e.map((function(e){return e.id===t.categoryId?Object(s.a)(Object(s.a)({},e),{},{matchers:e.matchers.filter((function(e){return e.id!==t.matcherId}))}):e}));case"update-matcher":return e.map((function(e){return e.id===t.categoryId?Object(s.a)(Object(s.a)({},e),{},{matchers:e.matchers.map((function(e){return e.id===t.matcherId?Object(s.a)(Object(s.a)({},e),{},{pattern:t.pattern}):e}))}):e}));case"load":return t.categories;default:throw new Error}}),[]),Y=Object(l.a)(U,2),X=Y[0],G=Y[1];Object(a.useEffect)((function(){_(),$(),Z(),q()}),[]);var _=function(){return fetch("http://localhost:8080/account").then((function(e){return e.json()})).then((function(e){return u(e.accounts)}))},$=function(){return fetch("http://localhost:8080/feed").then((function(e){return e.json()})).then((function(e){return p(e.feeds)}))},Z=function(){return fetch("http://localhost:8080/statement").then((function(e){return e.json()})).then((function(e){return E(e.statements)}))},q=function(){return fetch("http://localhost:8080/category").then((function(e){return e.json()})).then((function(e){return G({type:"load",categories:e.categories})}))},V=function(e){var t={};return e.forEach((function(e){return t[e.contentHash]?t[e.contentHash].push(e):t[e.contentHash]=[e]})),t};return r.a.createElement("div",{className:t},r.a.createElement("section",null,r.a.createElement("h2",null,"Accounts"),r.a.createElement("ul",null,o&&o.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,e.name," - ",r.a.createElement("button",{onClick:function(t){return n=e.id,fetch("http://localhost:8080/account/".concat(n),{method:"DELETE"}).then((function(e){return e.ok&&_()}));var n}},"Delete"),r.a.createElement("button",{onClick:function(t){return x(e.id)}},"Upload")),r.a.createElement("ul",null,r.a.createElement("li",null,"Number of transactions: ",e.numberOfTransactions),r.a.createElement("li",null,"Number of statements: ",y&&y.filter((function(t){return t.accountId===e.id})).length),r.a.createElement("li",null,"Uploads:"),f.length>0&&r.a.createElement("ol",null,f.map((function(e){return r.a.createElement("li",null,e.file," uploaded on ",function(e){var t=le.formatToParts(e).reduce(ue,{});return t.day+"."+t.month+"."+t.year}(new Date(e.dateImported))," at ",function(e){var t=le.formatToParts(e).reduce(ue,{});return t.hour+":"+t.minute}(new Date(e.dateImported)),r.a.createElement("button",{onClick:function(){return t=e.id,fetch("http://localhost:8080/duplicateCheck/".concat(t),{method:"GET"}).then((function(e){return e.ok&&e.json()})).then((function(e){z(t),J({type:"set-dups",duplicates:V(e.duplicates)})}));var t}},"duplicate check"),r.a.createElement("button",{onClick:function(){return t=e.id,fetch("http://localhost:8080/feed/".concat(t),{method:"DELETE"}).then((function(e){return e.ok&&_()&&$()&&Z()}));var t}},"delete"))}))),w===e.id&&r.a.createElement("ol",null,0===y.filter((function(t){return t.accountId===e.id})).length&&r.a.createElement("li",null,"Please specify the most current balance",r.a.createElement("input",{name:"balance",type:"input",value:null!==I?I:"",onChange:function(e){return T(e.target.value)}})),r.a.createElement("li",null,"Please select file  to upload",r.a.createElement("input",{name:"upload",type:"file",onChange:function(e){return L(e.target.files[0])}})),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return function(e){var t=new FormData;t.append("file",F),I&&t.append("currentBalance",I),fetch("http://localhost:8080/upload/".concat(e.name),{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){e.error||(z(e.feedId),J({type:"set-dups",duplicates:V(e.duplicates)}),_(),$(),z(f.filter((function(e){return e.file===F.name})).first),Z())}))}(e)}},"Go!")))))})),r.a.createElement("li",null,"New: ",r.a.createElement("input",{name:"newAccount",value:j,onChange:function(e){return k(e.target.value)}}),r.a.createElement("button",{onClick:function(e){return fetch("http://localhost:8080/account/".concat(j),{method:"PUT"}).then((function(e){return e.ok&&_()}))}},"Add")))),K&&Object.keys(K).length>0&&r.a.createElement("section",null,r.a.createElement("h2",null,"Duplicates"),r.a.createElement("button",{name:"assumptions",onClick:function(e){return J({type:"make-assumptions"})}},"Assumptions"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"line"),r.a.createElement("th",null,"content"),r.a.createElement("th",null,"Duplicate"))),r.a.createElement("tbody",null,Object.keys(K).map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{key:"".concat(t,"-dashed}")},r.a.createElement("td",null,"----------------")),K[e].map((function(e,n){return r.a.createElement("tr",{key:"".concat(t,"-").concat(n),className:(a=e,a.duplicate?"duplicate-row":"")},r.a.createElement("td",null,e.recordNumber),r.a.createElement("td",null,r.a.createElement("label",{for:"duplicate-".concat(t,"-").concat(n)},e.content)),r.a.createElement("td",null,e.count),r.a.createElement("td",null,r.a.createElement("input",{id:"duplicate-".concat(t,"-").concat(n),name:"duplicate-".concat(t,"-").concat(n),type:"checkbox",checked:e.duplicate,onChange:function(t){return J({type:"change-dup",hash:e.contentHash,recordNumber:e.recordNumber,duplicate:!e.duplicate})}})));var a})))})))),r.a.createElement("button",{name:"save",onClick:function(){return fetch("http://localhost:8080/duplicates/".concat(M),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)}).then((function(e){return e.ok&&e.json()})).then((function(e){return J({type:"set-dups",duplicates:V(e.duplicates)})}))}},"Save")),r.a.createElement("section",null,r.a.createElement("h2",null,"Categories"),r.a.createElement("ul",null,X&&X.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("input",{name:"category-".concat(e.id),value:e.name,onChange:function(t){return G({type:"update-category-name",categoryId:e.id,name:t.target.value})}}),r.a.createElement("button",{onClick:function(){return G({type:"remove-category",categoryId:e.id})}},"X")),r.a.createElement("ul",null,e.matchers&&e.matchers.map((function(t){return r.a.createElement("li",null,r.a.createElement("input",{name:t.id,value:t.pattern,onChange:function(n){return G({type:"update-matcher",categoryId:e.id,matcherId:t.id,pattern:n.target.value})}}),r.a.createElement("button",{onClick:function(){return G({type:"remove-matcher",categoryId:e.id,matcherId:t.id})}},"X"))})),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(t){return G({type:"add-matcher",categoryId:e.id})}},"Add"))))})),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(e){return G({type:"add-category"})}},"Add"))),r.a.createElement("button",{onClick:function(){return fetch("http://localhost:8080/category",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)}).then((function(e){return q()}))}},"Save")))}))(ie()),de=function(e){var t=Object(m.h)().accountName,n=Object(a.useState)(null),c=Object(l.a)(n,2),o=c[0],u=c[1];return Object(a.useEffect)((function(){fetch("http://localhost:8080/account/".concat(t,"/overview")).then((function(e){return e.ok&&e.json()})).then((function(e){return u(e)}))}),[]),console.log(o),r.a.createElement("div",null,r.a.createElement("h2",null,"Overview"),o&&r.a.createElement("dl",null,r.a.createElement("dt",null,"From"),r.a.createElement("dd",null,new Date(o.fromDate).toLocaleDateString()),r.a.createElement("dt",null,"To"),r.a.createElement("dd",null,new Date(o.toDate).toLocaleDateString()),r.a.createElement("dt",null,"Transactions"),r.a.createElement("dd",null,o.numberOfTransactions),r.a.createElement("dt",null,"End of Month Statements Generated"),r.a.createElement("dd",null,o.numberOfStatements)))},se=function(e){var t=Object(m.h)().accountName,n=Object(a.useState)([]),c=Object(l.a)(n,2),o=c[0],u=c[1],i=Object(a.useState)(null),d=Object(l.a)(i,2),s=d[0],f=d[1],p=Object(a.useState)(null),b=Object(l.a)(p,2),g=b[0],y=b[1];Object(a.useEffect)((function(){E()}),[]);var E=function(){return fetch("http://localhost:8080/account/".concat(t,"/fixedbalance")).then((function(e){return e.ok&&e.json()})).then((function(e){return u(e.balances)}))};return r.a.createElement("div",null,r.a.createElement("h2",null,"Fixed Balances"),"Date: ",r.a.createElement("input",{name:"date",type:"text",value:s,onChange:function(e){return f(e.target.value)}}),"Amount: ",r.a.createElement("input",{name:"amount",type:"text",value:g,onChange:function(e){return y(e.target.value)}}),r.a.createElement("button",{name:"save",onClick:function(e){fetch("http://localhost:8080/account/".concat(t,"/fixedbalance"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Object(h.a)(),time:s,amount:g})}).then((function(e){return e.ok&&e.json()})).then((function(e){return u(e.balances)}))}},"Add"),r.a.createElement("table",{width:"60%"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{key:"th0"},"Date"),r.a.createElement("th",{key:"th1"},"Amount"))),r.a.createElement("tbody",null,o&&o.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,new Date(e.time).toLocaleDateString("en",{year:"numeric",month:"long",day:"numeric"})," ",new Date(e.time).toLocaleTimeString()),r.a.createElement("td",null,e.amount))})))))};function fe(){var e=Object(u.a)([" \n\n .duplicate-row {\n   td {\n    text-decoration: line-through;\n   }\n   td.radio {\n    text-decoration: none;\n   }\n   \n }\n "]);return fe=function(){return e},e}var he=Object(f.a)((function(e){var t=e.className,n=e.feedId,c=Object(a.useState)(null),o=Object(l.a)(c,2),u=o[0],i=o[1],m=Object(a.useReducer)((function(e,t){switch(console.log(t),t.type){case"set-dups":return t.duplicates;case"change-dup":var n=Object.assign({},e);return n[t.hash]=e[t.hash].map((function(e){return e.recordNumber===t.recordNumber?Object(s.a)(Object(s.a)({},e),{},{duplicate:t.duplicate}):e})),n;case"make-assumptions":return Object.keys(e).forEach((function(t){1===e[t].length?e[t][0].duplicate=!0:(e[t][0].duplicate=!1,e[t].slice(1).forEach((function(e){e.duplicate=!0})))})),Object(s.a)({},e)}}),[]),d=Object(l.a)(m,2),f=d[0],h=d[1];console.log(n);var p=function(e){var t={};return e.forEach((function(e){return t[e.contentHash]?t[e.contentHash].push(e):t[e.contentHash]=[e]})),t};return Object(a.useEffect)((function(){!function(e){fetch("http://localhost:8080/duplicateCheck/".concat(e),{method:"GET"}).then((function(e){return 200===e.status&&e.json()})).then((function(t){t&&(i(e),h({type:"set-dups",duplicates:p(t.duplicates)}))}))}(n)}),[n]),f&&Object.keys(f).length>0&&r.a.createElement("section",{className:t},r.a.createElement("h2",null,"Duplicates"),r.a.createElement("button",{name:"assumptions",onClick:function(e){return h({type:"make-assumptions"})}},"Assumptions"),r.a.createElement("button",{name:"save",onClick:function(){return fetch("http://localhost:8080/duplicates/".concat(u),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}).then((function(e){return e.ok&&e.json()})).then((function(e){return h({type:"set-dups",duplicates:p(e.duplicates)})}))}},"Save"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"line"),r.a.createElement("th",null,"content"),r.a.createElement("th",null,"Duplicate"))),r.a.createElement("tbody",null,Object.keys(f).map((function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{key:"".concat(t,"-dashed}")},r.a.createElement("td",null,"----------------")),f[e].map((function(e,n){return r.a.createElement("tr",{key:"".concat(t,"-").concat(n),className:(a=e,a.duplicate?"duplicate-row":"")},r.a.createElement("td",{key:"d1-".concat(t,"-").concat(n)},e.recordNumber),r.a.createElement("td",{key:"d2-".concat(t,"-").concat(n)},r.a.createElement("label",{for:"duplicate-".concat(t,"-").concat(n)},e.content)),r.a.createElement("td",{key:"d3-".concat(t,"-").concat(n)},e.count),r.a.createElement("td",{key:"d4-".concat(t,"-").concat(n),className:"radio"},r.a.createElement("label",null,"yes",r.a.createElement("input",{id:"duplicate-".concat(t,"-").concat(n),name:"duplicate-".concat(t,"-").concat(n),type:"radio",value:"yes",checked:!0===e.duplicate,onChange:function(t){return h({type:"change-dup",hash:e.contentHash,recordNumber:e.recordNumber,duplicate:!0})}})),r.a.createElement("label",null,"no",r.a.createElement("input",{id:"duplicate-".concat(t,"-").concat(n),name:"duplicate-".concat(t,"-").concat(n),type:"radio",value:"no",checked:!0!==e.duplicate&&null!==e.duplicate,onChange:function(t){return h({type:"change-dup",hash:e.contentHash,recordNumber:e.recordNumber,duplicate:!1})}})),r.a.createElement("label",null,"don't know",r.a.createElement("input",{id:"duplicate-".concat(t,"-").concat(n),name:"duplicate-".concat(t,"-").concat(n),type:"radio",value:"unknown",checked:null===e.duplicate,onChange:function(t){return h({type:"change-dup",hash:e.contentHash,recordNumber:e.recordNumber,duplicate:null})}}))));var a})))})))))}))(fe());function pe(){var e=Object(u.a)(["\n    margin-left: 4pt;\n    display: inline-block;\n"]);return pe=function(){return e},e}function be(){var e=Object(u.a)(["\n    display: inline-block;\n"]);return be=function(){return e},e}var ge=f.a.dt(be()),ye=f.a.dd(pe()),Ee=function(e){var t=Object(m.h)().accountName,n=Object(a.useState)([]),c=Object(l.a)(n,2),o=c[0],u=c[1],i=Object(a.useState)(null),d=Object(l.a)(i,2),s=d[0],f=d[1];Object(a.useEffect)((function(){h()}),[]);var h=function(){return fetch("http://localhost:8080/account/".concat(t,"/feed")).then((function(e){return e.ok&&e.json()})).then((function(e){return u(e.feeds)}))};return r.a.createElement("div",null,r.a.createElement("h2",null,"Feeds"),r.a.createElement("input",{type:"file",name:"upload",onChange:function(e){return function(e){if(console.log(e),e){var n=new FormData;n.append("file",e),fetch("http://localhost:8080/account/".concat(t,"/feed"),{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){e.error||h()}))}}(e.target.files[0])}}),r.a.createElement("table",{width:"100%"},r.a.createElement("tbody",null,o.map((function(e,t){return r.a.createElement("tr",{key:"f0-".concat(t)},r.a.createElement("td",{key:"f1-".concat(t)},r.a.createElement("input",{id:"f1-".concat(t),type:"radio",name:"feed",onChange:function(t){return f(e)},checked:e===s})),r.a.createElement("td",{key:"f2-".concat(t)},r.a.createElement("label",{htmlFor:"f1-".concat(t)}," ",e.file)),r.a.createElement("td",{key:"f3-".concat(t)},new Date(e.dateImported).toLocaleDateString("en",{year:"numeric",month:"long",day:"numeric"})," ",new Date(e.dateImported).toLocaleTimeString()))})))),s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{key:"overview"},r.a.createElement("dl",null,r.a.createElement(ge,null,"From:"),r.a.createElement(ye,null,new Date(s.fromDate).toLocaleDateString("en",{year:"numeric",month:"long",day:"numeric"}))),r.a.createElement(ge,null,"To:"),r.a.createElement(ye,null,new Date(s.toDate).toLocaleDateString("en",{year:"numeric",month:"long",day:"numeric"})),r.a.createElement("dl",null,r.a.createElement(ge,null,"Transactions:"),r.a.createElement(ye,null,s.numberOfTransactions))),r.a.createElement("button",{name:"delete",onClick:function(e){return t=s.feedId,fetch("http://localhost:8080/feed/".concat(t),{method:"DELETE"}).then((function(e){return e.ok&&h()&&f(null)}));var t}},"Delete"),r.a.createElement(he,{feedId:s.feedId})))};function Oe(){var e=Object(u.a)(["\n flex-grow: 0;\n padding-left: 2rem;\n ol {\n    list-style-type: none;\n    padding-left: 0;\n }\n ol > li  ol > li  {\n    padding-left: 2rem;\n }\n a {\n      text-align: center;\n      display: block;\n      color: black;\n      height: 3rem;\n      line-height: 3rem;\n      text-decoration: none;\n  }\n \n .navActive {\n    background-color: #DCDCDD;\n }\n"]);return Oe=function(){return e},e}function ve(){var e=Object(u.a)(["\n padding-left: 2rem;\n flex-grow: 2;\n"]);return ve=function(){return e},e}function je(){var e=Object(u.a)(["\n    display: flex;\n"]);return je=function(){return e},e}var ke=f.a.div(je()),Ce=f.a.div(ve()),Se=f.a.div(Oe()),we=function(e){var t=Object(a.useState)([]),n=Object(l.a)(t,2),c=n[0],o=n[1];Object(a.useEffect)((function(){u()}),[]);var u=function(){return fetch("http://localhost:8080/account").then((function(e){return e.json()})).then((function(e){return o(e.accounts)}))};return r.a.createElement(ke,null,r.a.createElement(Se,null,r.a.createElement("ol",null,c&&c.map((function(e){return r.a.createElement("li",{key:e.name},r.a.createElement(i.b,{activeClassName:"navActive",to:"/accounts/".concat(e.name)},e.name),r.a.createElement("ol",null,r.a.createElement("li",null,r.a.createElement(i.b,{activeClassName:"navActive",to:"/accounts/".concat(e.name,"/feeds")},"Feeds")),r.a.createElement("li",null,r.a.createElement(i.b,{activeClassName:"navActive",to:"/accounts/".concat(e.name,"/fixedbalances")},"FixedBalances"))))})))),r.a.createElement(Ce,null,r.a.createElement(m.d,null,r.a.createElement(m.b,{key:"route-2",path:"/accounts/:accountName/feeds"},r.a.createElement(Ee,null)),r.a.createElement(m.b,{key:"route-3",path:"/accounts/:accountName/fixedbalances"},r.a.createElement(se,null)),r.a.createElement(m.b,{key:"route-3",path:"/accounts/:accountName"},r.a.createElement(de,null)))))},xe=function(e){var t=Object(a.useReducer)((function(e,t){switch(t.type){case"add-category":return[].concat(Object(d.a)(e),[{id:Object(h.a)(),name:null,matchers:[]}]);case"remove-category":return e.filter((function(e){return e.id!==t.categoryId}));case"update-category-name":return e.map((function(e){return e.id===t.categoryId?Object(s.a)(Object(s.a)({},e),{},{name:t.name}):e}));case"add-matcher":return e.map((function(e){return e.id===t.categoryId?Object(s.a)(Object(s.a)({},e),{},{matchers:[].concat(Object(d.a)(e.matchers),[{id:Object(h.a)(),pattern:null}])}):e}));case"remove-matcher":return e.map((function(e){return e.id===t.categoryId?Object(s.a)(Object(s.a)({},e),{},{matchers:e.matchers.filter((function(e){return e.id!==t.matcherId}))}):e}));case"update-matcher":return e.map((function(e){return e.id===t.categoryId?Object(s.a)(Object(s.a)({},e),{},{matchers:e.matchers.map((function(e){return e.id===t.matcherId?Object(s.a)(Object(s.a)({},e),{},{pattern:t.pattern}):e}))}):e}));case"load":return t.categories;default:throw new Error}}),[]),n=Object(l.a)(t,2),c=n[0],o=n[1];Object(a.useEffect)((function(){u()}),[]);var u=function(){return fetch("http://localhost:8080/category").then((function(e){return e.json()})).then((function(e){return o({type:"load",categories:e.categories})}))};return r.a.createElement("section",null,r.a.createElement("h2",null,"Categories"),r.a.createElement("ul",null,c&&c.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("input",{name:"category-".concat(e.id),value:e.name,onChange:function(t){return o({type:"update-category-name",categoryId:e.id,name:t.target.value})}}),r.a.createElement("button",{onClick:function(){return o({type:"remove-category",categoryId:e.id})}},"X")),r.a.createElement("ul",null,e.matchers&&e.matchers.map((function(t){return r.a.createElement("li",null,r.a.createElement("input",{name:t.id,value:t.pattern,onChange:function(n){return o({type:"update-matcher",categoryId:e.id,matcherId:t.id,pattern:n.target.value})}}),r.a.createElement("button",{onClick:function(){return o({type:"remove-matcher",categoryId:e.id,matcherId:t.id})}},"X"))})),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(t){return o({type:"add-matcher",categoryId:e.id})}},"Add"))))})),r.a.createElement("li",null,r.a.createElement("button",{onClick:function(e){return o({type:"add-category"})}},"Add"))),r.a.createElement("button",{onClick:function(){return fetch("http://localhost:8080/category",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){return u()}))}},"Save"))};function De(){var e=Object(u.a)(["\n"]);return De=function(){return e},e}function Ne(){var e=Object(u.a)(["\n    display: flex;\n    ol {\n        display: flex;\n        margin: 0;\n        list-style-type: none;\n        li {\n          padding-right: 1rem;\n        }\n        a {\n          text-align: center;\n          display: block;\n          color: black;\n          height: 3rem;\n          line-height: 3rem;\n          text-decoration: none;\n        }\n        .navActive {\n          background-color: #DCDCDD;\n        }\n     }\n   h1 {\n     margin: 0;\n     margin-left: 5rem;\n   }  \n     border-bottom: solid black 1px;\n"]);return Ne=function(){return e},e}var Ie=f.a.header(Ne()),Te=f.a.main(De());var Ae=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],o=(new Date).getMonth()+1,u=(new Date).getFullYear();return r.a.createElement("div",{className:"App"},r.a.createElement(i.a,null,r.a.createElement(Ie,{className:"App-header"},r.a.createElement("ol",null,r.a.createElement("li",null,r.a.createElement(i.b,{activeClassName:"navActive",to:"/accounts"},"Accounts")),r.a.createElement("li",null,r.a.createElement(i.b,{activeClassName:"navActive",to:"/categories"},"Categories")),r.a.createElement("li",null,r.a.createElement(i.b,{activeClassName:"navActive",to:"/transactions"},"Transactions")),r.a.createElement("li",null,r.a.createElement(i.b,{activeClassName:"navActive",to:"/reports"},"Reports"))),r.a.createElement("h1",null,n)),r.a.createElement(Te,null,r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,key:"route-1",path:"/transactions"},r.a.createElement(m.a,{to:"/transactions/".concat(u,"/").concat(o)})),r.a.createElement(m.b,{exact:!0,key:"route-1",path:"/transactions/:year/:month"},r.a.createElement(U,{onChangeHeaderInfo:function(e){return c(e)}})),r.a.createElement(m.b,{exact:!1,key:"route-2",path:"/reports"},r.a.createElement(ce,null)),r.a.createElement(m.b,{exact:!1,key:"route-3",path:"/accounts"},r.a.createElement(we,null)),r.a.createElement(m.b,{exact:!1,key:"route-3",path:"/categories"},r.a.createElement(xe,null)),r.a.createElement(m.b,{exact:!1,key:"route-3",path:"/upload"},r.a.createElement(me,null)),r.a.createElement(m.b,null,r.a.createElement(m.a,{to:"enterdata"}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[255,1,2]]]);
//# sourceMappingURL=main.aeff2e02.chunk.js.map